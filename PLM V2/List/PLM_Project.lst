
AVRASM ver. 2.1.17  F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm Tue Apr 13 17:56:21 2010

F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1026): warning: Register r5 already defined by the .DEF directive
F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1027): warning: Register r4 already defined by the .DEF directive
F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1028): warning: Register r7 already defined by the .DEF directive
F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1029): warning: Register r6 already defined by the .DEF directive
F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1030): warning: Register r9 already defined by the .DEF directive
F:\04.HUT\FINAL\DoAn2010\PLM V2\List\PLM_Project.asm(1031): warning: Register r8 already defined by the .DEF directive
                 
                 
                 ;CodeVisionAVR C Compiler V2.03.4 Standard
                 ;(C) Copyright 1998-2008 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 
                 ;Chip type              : ATmega32
                 ;Program type           : Application
                 ;Clock frequency        : 11.059200 MHz
                 ;Memory model           : Small
                 ;Optimize for           : Size
                 ;(s)printf features     : int, width
                 ;(s)scanf features      : int, width
                 ;External RAM size      : 0
                 ;Data Stack size        : 512 byte(s)
                 ;Heap size              : 0 byte(s)
                 ;Promote char to int    : Yes
                 ;char is unsigned       : Yes
                 ;global const stored in FLASH  : No
                 ;8 bit enums            : Yes
                 ;Enhanced core instructions    : On
                 ;Smart register allocation : On
                 ;Automatic register allocation : On
                 
                 	#pragma AVRPART ADMIN PART_NAME ATmega32
                 	#pragma AVRPART MEMORY PROG_FLASH 32768
                 	#pragma AVRPART MEMORY EEPROM 1024
                 	#pragma AVRPART MEMORY INT_SRAM SIZE 2048
                 	#pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                 
                 	.LISTMAC
                 	.EQU UDRE=0x5
                 	.EQU RXC=0x7
                 	.EQU USR=0xB
                 	.EQU UDR=0xC
                 	.EQU SPSR=0xE
                 	.EQU SPDR=0xF
                 	.EQU EERE=0x0
                 	.EQU EEWE=0x1
                 	.EQU EEMWE=0x2
                 	.EQU EECR=0x1C
                 	.EQU EEDR=0x1D
                 	.EQU EEARL=0x1E
                 	.EQU EEARH=0x1F
                 	.EQU WDTCR=0x21
                 	.EQU MCUCR=0x35
                 	.EQU GICR=0x3B
                 	.EQU SPL=0x3D
                 	.EQU SPH=0x3E
                 	.EQU SREG=0x3F
                 
                 	.DEF R0X0=R0
                 	.DEF R0X1=R1
                 	.DEF R0X2=R2
                 	.DEF R0X3=R3
                 	.DEF R0X4=R4
                 	.DEF R0X5=R5
                 	.DEF R0X6=R6
                 	.DEF R0X7=R7
                 	.DEF R0X8=R8
                 	.DEF R0X9=R9
                 	.DEF R0XA=R10
                 	.DEF R0XB=R11
                 	.DEF R0XC=R12
                 	.DEF R0XD=R13
                 	.DEF R0XE=R14
                 	.DEF R0XF=R15
                 	.DEF R0X10=R16
                 	.DEF R0X11=R17
                 	.DEF R0X12=R18
                 	.DEF R0X13=R19
                 	.DEF R0X14=R20
                 	.DEF R0X15=R21
                 	.DEF R0X16=R22
                 	.DEF R0X17=R23
                 	.DEF R0X18=R24
                 	.DEF R0X19=R25
                 	.DEF R0X1A=R26
                 	.DEF R0X1B=R27
                 	.DEF R0X1C=R28
                 	.DEF R0X1D=R29
                 	.DEF R0X1E=R30
                 	.DEF R0X1F=R31
                 
                 	.MACRO __CPD1N
                 	CPI  R30,LOW(@0)
                 	LDI  R26,HIGH(@0)
                 	CPC  R31,R26
                 	LDI  R26,BYTE3(@0)
                 	CPC  R22,R26
                 	LDI  R26,BYTE4(@0)
                 	CPC  R23,R26
                 	.ENDM
                 
                 	.MACRO __CPD2N
                 	CPI  R26,LOW(@0)
                 	LDI  R30,HIGH(@0)
                 	CPC  R27,R30
                 	LDI  R30,BYTE3(@0)
                 	CPC  R24,R30
                 	LDI  R30,BYTE4(@0)
                 	CPC  R25,R30
                 	.ENDM
                 
                 	.MACRO __CPWRR
                 	CP   R@0,R@2
                 	CPC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __CPWRN
                 	CPI  R@0,LOW(@2)
                 	LDI  R30,HIGH(@2)
                 	CPC  R@1,R30
                 	.ENDM
                 
                 	.MACRO __ADDB1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDB2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1MN
                 	SUBI R30,LOW(-@0-(@1))
                 	SBCI R31,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW2MN
                 	SUBI R26,LOW(-@0-(@1))
                 	SBCI R27,HIGH(-@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDW1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1FN
                 	SUBI R30,LOW(-2*@0-(@1))
                 	SBCI R31,HIGH(-2*@0-(@1))
                 	SBCI R22,BYTE3(-2*@0-(@1))
                 	.ENDM
                 
                 	.MACRO __ADDD1N
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	SBCI R22,BYTE3(-@0)
                 	SBCI R23,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __ADDD2N
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	SBCI R24,BYTE3(-@0)
                 	SBCI R25,BYTE4(-@0)
                 	.ENDM
                 
                 	.MACRO __SUBD1N
                 	SUBI R30,LOW(@0)
                 	SBCI R31,HIGH(@0)
                 	SBCI R22,BYTE3(@0)
                 	SBCI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __SUBD2N
                 	SUBI R26,LOW(@0)
                 	SBCI R27,HIGH(@0)
                 	SBCI R24,BYTE3(@0)
                 	SBCI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDBMNN
                 	LDS  R30,@0+@1
                 	ANDI R30,LOW(@2)
                 	STS  @0+@1,R30
                 	.ENDM
                 
                 	.MACRO __ANDWMNN
                 	LDS  R30,@0+@1
                 	ANDI R30,LOW(@2)
                 	STS  @0+@1,R30
                 	LDS  R30,@0+@1+1
                 	ANDI R30,HIGH(@2)
                 	STS  @0+@1+1,R30
                 	.ENDM
                 
                 	.MACRO __ANDD1N
                 	ANDI R30,LOW(@0)
                 	ANDI R31,HIGH(@0)
                 	ANDI R22,BYTE3(@0)
                 	ANDI R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ANDD2N
                 	ANDI R26,LOW(@0)
                 	ANDI R27,HIGH(@0)
                 	ANDI R24,BYTE3(@0)
                 	ANDI R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORBMNN
                 	LDS  R30,@0+@1
                 	ORI  R30,LOW(@2)
                 	STS  @0+@1,R30
                 	.ENDM
                 
                 	.MACRO __ORWMNN
                 	LDS  R30,@0+@1
                 	ORI  R30,LOW(@2)
                 	STS  @0+@1,R30
                 	LDS  R30,@0+@1+1
                 	ORI  R30,HIGH(@2)
                 	STS  @0+@1+1,R30
                 	.ENDM
                 
                 	.MACRO __ORD1N
                 	ORI  R30,LOW(@0)
                 	ORI  R31,HIGH(@0)
                 	ORI  R22,BYTE3(@0)
                 	ORI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __ORD2N
                 	ORI  R26,LOW(@0)
                 	ORI  R27,HIGH(@0)
                 	ORI  R24,BYTE3(@0)
                 	ORI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __DELAY_USB
                 	LDI  R24,LOW(@0)
                 __DELAY_USB_LOOP:
                 	DEC  R24
                 	BRNE __DELAY_USB_LOOP
                 	.ENDM
                 
                 	.MACRO __DELAY_USW
                 	LDI  R24,LOW(@0)
                 	LDI  R25,HIGH(@0)
                 __DELAY_USW_LOOP:
                 	SBIW R24,1
                 	BRNE __DELAY_USW_LOOP
                 	.ENDM
                 
                 	.MACRO __CLRD1S
                 	LDI  R30,0
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R30
                 	STD  Y+@0+2,R30
                 	STD  Y+@0+3,R30
                 	.ENDM
                 
                 	.MACRO __GETD1S
                 	LDD  R30,Y+@0
                 	LDD  R31,Y+@0+1
                 	LDD  R22,Y+@0+2
                 	LDD  R23,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __PUTD1S
                 	STD  Y+@0,R30
                 	STD  Y+@0+1,R31
                 	STD  Y+@0+2,R22
                 	STD  Y+@0+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTD2S
                 	STD  Y+@0,R26
                 	STD  Y+@0+1,R27
                 	STD  Y+@0+2,R24
                 	STD  Y+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __POINTB1MN
                 	LDI  R30,LOW(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTW1MN
                 	LDI  R30,LOW(@0+@1)
                 	LDI  R31,HIGH(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTD1M
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __POINTW1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTD1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	LDI  R22,BYTE3(2*@0+@1)
                 	LDI  R23,BYTE4(2*@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTB2MN
                 	LDI  R26,LOW(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTW2MN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	.ENDM
                 
                 	.MACRO __POINTBRM
                 	LDI  R@0,LOW(@1)
                 	.ENDM
                 
                 	.MACRO __POINTWRM
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __POINTBRMN
                 	LDI  R@0,LOW(@1+@2)
                 	.ENDM
                 
                 	.MACRO __POINTWRMN
                 	LDI  R@0,LOW(@2+@3)
                 	LDI  R@1,HIGH(@2+@3)
                 	.ENDM
                 
                 	.MACRO __POINTWRFN
                 	LDI  R@0,LOW(@2*2+@3)
                 	LDI  R@1,HIGH(@2*2+@3)
                 	.ENDM
                 
                 	.MACRO __GETD1N
                 	LDI  R30,LOW(@0)
                 	LDI  R31,HIGH(@0)
                 	LDI  R22,BYTE3(@0)
                 	LDI  R23,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2N
                 	LDI  R26,LOW(@0)
                 	LDI  R27,HIGH(@0)
                 	LDI  R24,BYTE3(@0)
                 	LDI  R25,BYTE4(@0)
                 	.ENDM
                 
                 	.MACRO __GETD2S
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	LDD  R24,Y+@0+2
                 	LDD  R25,Y+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB1MN
                 	LDS  R30,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETB1HMN
                 	LDS  R31,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETW1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	.ENDM
                 
                 	.MACRO __GETD1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	LDS  R22,@0+@1+2
                 	LDS  R23,@0+@1+3
                 	.ENDM
                 
                 	.MACRO __GETBRMN
                 	LDS  R@0,@1+@2
                 	.ENDM
                 
                 	.MACRO __GETWRMN
                 	LDS  R@0,@2+@3
                 	LDS  R@1,@2+@3+1
                 	.ENDM
                 
                 	.MACRO __GETWRZ
                 	LDD  R@0,Z+@2
                 	LDD  R@1,Z+@2+1
                 	.ENDM
                 
                 	.MACRO __GETD2Z
                 	LDD  R26,Z+@0
                 	LDD  R27,Z+@0+1
                 	LDD  R24,Z+@0+2
                 	LDD  R25,Z+@0+3
                 	.ENDM
                 
                 	.MACRO __GETB2MN
                 	LDS  R26,@0+@1
                 	.ENDM
                 
                 	.MACRO __GETW2MN
                 	LDS  R26,@0+@1
                 	LDS  R27,@0+@1+1
                 	.ENDM
                 
                 	.MACRO __GETD2MN
                 	LDS  R26,@0+@1
                 	LDS  R27,@0+@1+1
                 	LDS  R24,@0+@1+2
                 	LDS  R25,@0+@1+3
                 	.ENDM
                 
                 	.MACRO __PUTB1MN
                 	STS  @0+@1,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1MN
                 	STS  @0+@1,R30
                 	STS  @0+@1+1,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1MN
                 	STS  @0+@1,R30
                 	STS  @0+@1+1,R31
                 	STS  @0+@1+2,R22
                 	STS  @0+@1+3,R23
                 	.ENDM
                 
                 	.MACRO __PUTB1EN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	CALL __EEPROMWRB
                 	.ENDM
                 
                 	.MACRO __PUTW1EN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	CALL __EEPROMWRW
                 	.ENDM
                 
                 	.MACRO __PUTD1EN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	CALL __EEPROMWRD
                 	.ENDM
                 
                 	.MACRO __PUTBR0MN
                 	STS  @0+@1,R0
                 	.ENDM
                 
                 	.MACRO __PUTDZ2
                 	STD  Z+@0,R26
                 	STD  Z+@0+1,R27
                 	STD  Z+@0+2,R24
                 	STD  Z+@0+3,R25
                 	.ENDM
                 
                 	.MACRO __PUTBMRN
                 	STS  @0+@1,R@2
                 	.ENDM
                 
                 	.MACRO __PUTWMRN
                 	STS  @0+@1,R@2
                 	STS  @0+@1+1,R@3
                 	.ENDM
                 
                 	.MACRO __PUTBZR
                 	STD  Z+@1,R@0
                 	.ENDM
                 
                 	.MACRO __PUTWZR
                 	STD  Z+@2,R@0
                 	STD  Z+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __GETW1R
                 	MOV  R30,R@0
                 	MOV  R31,R@1
                 	.ENDM
                 
                 	.MACRO __GETW2R
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	.ENDM
                 
                 	.MACRO __GETWRN
                 	LDI  R@0,LOW(@2)
                 	LDI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __PUTW1R
                 	MOV  R@0,R30
                 	MOV  R@1,R31
                 	.ENDM
                 
                 	.MACRO __PUTW2R
                 	MOV  R@0,R26
                 	MOV  R@1,R27
                 	.ENDM
                 
                 	.MACRO __ADDWRN
                 	SUBI R@0,LOW(-@2)
                 	SBCI R@1,HIGH(-@2)
                 	.ENDM
                 
                 	.MACRO __ADDWRR
                 	ADD  R@0,R@2
                 	ADC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __SUBWRN
                 	SUBI R@0,LOW(@2)
                 	SBCI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __SUBWRR
                 	SUB  R@0,R@2
                 	SBC  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ANDWRN
                 	ANDI R@0,LOW(@2)
                 	ANDI R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ANDWRR
                 	AND  R@0,R@2
                 	AND  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __ORWRN
                 	ORI  R@0,LOW(@2)
                 	ORI  R@1,HIGH(@2)
                 	.ENDM
                 
                 	.MACRO __ORWRR
                 	OR   R@0,R@2
                 	OR   R@1,R@3
                 	.ENDM
                 
                 	.MACRO __EORWRR
                 	EOR  R@0,R@2
                 	EOR  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __GETWRS
                 	LDD  R@0,Y+@2
                 	LDD  R@1,Y+@2+1
                 	.ENDM
                 
                 	.MACRO __PUTWSR
                 	STD  Y+@2,R@0
                 	STD  Y+@2+1,R@1
                 	.ENDM
                 
                 	.MACRO __MOVEWRR
                 	MOV  R@0,R@2
                 	MOV  R@1,R@3
                 	.ENDM
                 
                 	.MACRO __INWR
                 	IN   R@0,@2
                 	IN   R@1,@2+1
                 	.ENDM
                 
                 	.MACRO __OUTWR
                 	OUT  @2+1,R@1
                 	OUT  @2,R@0
                 	.ENDM
                 
                 	.MACRO __CALL1MN
                 	LDS  R30,@0+@1
                 	LDS  R31,@0+@1+1
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL1FN
                 	LDI  R30,LOW(2*@0+@1)
                 	LDI  R31,HIGH(2*@0+@1)
                 	CALL __GETW1PF
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __CALL2EN
                 	LDI  R26,LOW(@0+@1)
                 	LDI  R27,HIGH(@0+@1)
                 	CALL __EEPROMRDW
                 	ICALL
                 	.ENDM
                 
                 	.MACRO __GETW1STACK
                 	IN   R26,SPL
                 	IN   R27,SPH
                 	ADIW R26,@0+1
                 	LD   R30,X+
                 	LD   R31,X
                 	.ENDM
                 
                 	.MACRO __NBST
                 	BST  R@0,@1
                 	IN   R30,SREG
                 	LDI  R31,0x40
                 	EOR  R30,R31
                 	OUT  SREG,R30
                 	.ENDM
                 
                 
                 	.MACRO __PUTB1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SN
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNS
                 	LDD  R26,Y+@0
                 	LDD  R27,Y+@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMN
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1PMNS
                 	LDS  R26,@0
                 	LDS  R27,@0+1
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RN
                 	MOVW R26,R@0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RNS
                 	MOVW R26,R@0
                 	ADIW R26,@1
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RON
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	SUBI R26,LOW(-@2)
                 	SBCI R27,HIGH(-@2)
                 	CALL __PUTDP1
                 	.ENDM
                 
                 	.MACRO __PUTB1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1RONS
                 	MOV  R26,R@0
                 	MOV  R27,R@1
                 	ADIW R26,@2
                 	CALL __PUTDP1
                 	.ENDM
                 
                 
                 	.MACRO __GETB1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R30,Z
                 	.ENDM
                 
                 	.MACRO __GETB1HSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	.ENDM
                 
                 	.MACRO __GETW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R31,Z
                 	MOV  R30,R0
                 	.ENDM
                 
                 	.MACRO __GETD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R0,Z+
                 	LD   R1,Z+
                 	LD   R22,Z+
                 	LD   R23,Z
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __GETB2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R26,X
                 	.ENDM
                 
                 	.MACRO __GETW2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	.ENDM
                 
                 	.MACRO __GETD2SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R1,X+
                 	LD   R24,X+
                 	LD   R25,X
                 	MOVW R26,R0
                 	.ENDM
                 
                 	.MACRO __GETBRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@1)
                 	SBCI R31,HIGH(-@1)
                 	LD   R@0,Z
                 	.ENDM
                 
                 	.MACRO __GETWRSX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	LD   R@0,Z+
                 	LD   R@1,Z
                 	.ENDM
                 
                 	.MACRO __LSLW8SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	LD   R31,Z
                 	CLR  R30
                 	.ENDM
                 
                 	.MACRO __PUTB1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __CLRW1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	CLR  R0
                 	ST   Z+,R0
                 	ST   Z,R0
                 	.ENDM
                 
                 	.MACRO __CLRD1SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	CLR  R0
                 	ST   Z+,R0
                 	ST   Z+,R0
                 	ST   Z+,R0
                 	ST   Z,R0
                 	.ENDM
                 
                 	.MACRO __PUTB2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R26
                 	.ENDM
                 
                 	.MACRO __PUTW2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z,R27
                 	.ENDM
                 
                 	.MACRO __PUTD2SX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z+,R26
                 	ST   Z+,R27
                 	ST   Z+,R24
                 	ST   Z,R25
                 	.ENDM
                 
                 	.MACRO __PUTBSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@0)
                 	SBCI R31,HIGH(-@0)
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTWSRX
                 	MOVW R30,R28
                 	SUBI R30,LOW(-@2)
                 	SBCI R31,HIGH(-@2)
                 	ST   Z+,R@0
                 	ST   Z,R@1
                 	.ENDM
                 
                 	.MACRO __PUTB1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X,R30
                 	.ENDM
                 
                 	.MACRO __PUTW1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X,R31
                 	.ENDM
                 
                 	.MACRO __PUTD1SNX
                 	MOVW R26,R28
                 	SUBI R26,LOW(-@0)
                 	SBCI R27,HIGH(-@0)
                 	LD   R0,X+
                 	LD   R27,X
                 	MOV  R26,R0
                 	SUBI R26,LOW(-@1)
                 	SBCI R27,HIGH(-@1)
                 	ST   X+,R30
                 	ST   X+,R31
                 	ST   X+,R22
                 	ST   X,R23
                 	.ENDM
                 
                 	.MACRO __MULBRR
                 	MULS R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRRU
                 	MUL  R@0,R@1
                 	MOVW R30,R0
                 	.ENDM
                 
                 	.MACRO __MULBRR0
                 	MULS R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBRRU0
                 	MUL  R@0,R@1
                 	.ENDM
                 
                 	.MACRO __MULBNWRU
                 	LDI  R26,@2
                 	MUL  R26,R@0
                 	MOVW R30,R0
                 	MUL  R26,R@1
                 	ADD  R31,R0
                 	.ENDM
                 
                 ;NAME DEFINITIONS FOR GLOBAL VARIABLES ALLOCATED TO REGISTERS
                 	.DEF _rx_wr_index=R5
                 	.DEF _rx_rd_index=R4
                 	.DEF _rx_counter=R7
                 	.DEF _tx_wr_index=R6
                 	.DEF _tx_rd_index=R9
                 	.DEF _tx_counter=R8
                 
                 	.CSEG
                 	.ORG 0x00
                 
                 ;INTERRUPT VECTORS
000000 940c 0153 	JMP  __RESET
000002 940c 0000 	JMP  0x00
000004 940c 0398 	JMP  _ext_int1_isr
000006 940c 0000 	JMP  0x00
000008 940c 0000 	JMP  0x00
00000a 940c 0000 	JMP  0x00
00000c 940c 0000 	JMP  0x00
00000e 940c 0000 	JMP  0x00
000010 940c 0000 	JMP  0x00
000012 940c 0000 	JMP  0x00
000014 940c 0000 	JMP  0x00
000016 940c 0000 	JMP  0x00
000018 940c 03b9 	JMP  _spi_isr
00001a 940c 0469 	JMP  _usart_rx_isr
00001c 940c 0000 	JMP  0x00
00001e 940c 04a8 	JMP  _usart_tx_isr
000020 940c 0000 	JMP  0x00
000022 940c 0000 	JMP  0x00
000024 940c 0000 	JMP  0x00
000026 940c 0000 	JMP  0x00
000028 940c 0000 	JMP  0x00
                 
                 _ucCRC:
00002a 0000
00002b 0000
00002c 0000
00002d 0000      	.DB  0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0
00002e 0100
00002f 0200
000030 1800
000031 4000      	.DB  0x0,0x1,0x0,0x2,0x0,0x18,0x0,0x40
000032 c000
000033 0003
000034 7000
000035 2804      	.DB  0x0,0xC0,0x3,0x0,0x0,0x70,0x4,0x28
000036 0100
000037 1c30
000038 0600
000039 8080      	.DB  0x0,0x1,0x30,0x1C,0x0,0x6,0x80,0x80
00003a 1000
00003b 8080
00003c a007
00003d 0a00      	.DB  0x0,0x10,0x80,0x80,0x7,0xA0,0x0,0xA
00003e 0100
00003f 02e0
000040 c008
000041 0550      	.DB  0x0,0x1,0xE0,0x2,0x8,0xC0,0x50,0x5
000042 0e00
000043 4003
000044 0060
000045 1438      	.DB  0x0,0xE,0x3,0x40,0x60,0x0,0x38,0x14
000046 0100
000047 200c
000048 0000
000049 0000      	.DB  0x0,0x1,0xC,0x20,0x0,0x0,0x0,0x0
                 _tableCRC:
00004a 0000
00004b 8005
00004c 800f
00004d 000a      	.DB  0x0,0x0,0x5,0x80,0xF,0x80,0xA,0x0
00004e 801b
00004f 001e
000050 0014
000051 8011      	.DB  0x1B,0x80,0x1E,0x0,0x14,0x0,0x11,0x80
000052 8033
000053 0036
000054 003c
000055 8039      	.DB  0x33,0x80,0x36,0x0,0x3C,0x0,0x39,0x80
000056 0028
000057 802d
000058 8027
000059 0022      	.DB  0x28,0x0,0x2D,0x80,0x27,0x80,0x22,0x0
00005a 8063
00005b 0066
00005c 006c
00005d 8069      	.DB  0x63,0x80,0x66,0x0,0x6C,0x0,0x69,0x80
00005e 0078
00005f 807d
000060 8077
000061 0072      	.DB  0x78,0x0,0x7D,0x80,0x77,0x80,0x72,0x0
000062 0050
000063 8055
000064 805f
000065 005a      	.DB  0x50,0x0,0x55,0x80,0x5F,0x80,0x5A,0x0
000066 804b
000067 004e
000068 0044
000069 8041      	.DB  0x4B,0x80,0x4E,0x0,0x44,0x0,0x41,0x80
00006a 80c3
00006b 00c6
00006c 00cc
00006d 80c9      	.DB  0xC3,0x80,0xC6,0x0,0xCC,0x0,0xC9,0x80
00006e 00d8
00006f 80dd
000070 80d7
000071 00d2      	.DB  0xD8,0x0,0xDD,0x80,0xD7,0x80,0xD2,0x0
000072 00f0
000073 80f5
000074 80ff
000075 00fa      	.DB  0xF0,0x0,0xF5,0x80,0xFF,0x80,0xFA,0x0
000076 80eb
000077 00ee
000078 00e4
000079 80e1      	.DB  0xEB,0x80,0xEE,0x0,0xE4,0x0,0xE1,0x80
00007a 00a0
00007b 80a5
00007c 80af
00007d 00aa      	.DB  0xA0,0x0,0xA5,0x80,0xAF,0x80,0xAA,0x0
00007e 80bb
00007f 00be
000080 00b4
000081 80b1      	.DB  0xBB,0x80,0xBE,0x0,0xB4,0x0,0xB1,0x80
000082 8093
000083 0096
000084 009c
000085 8099      	.DB  0x93,0x80,0x96,0x0,0x9C,0x0,0x99,0x80
000086 0088
000087 808d
000088 8087
000089 0082      	.DB  0x88,0x0,0x8D,0x80,0x87,0x80,0x82,0x0
00008a 8183
00008b 0186
00008c 018c
00008d 8189      	.DB  0x83,0x81,0x86,0x1,0x8C,0x1,0x89,0x81
00008e 0198
00008f 819d
000090 8197
000091 0192      	.DB  0x98,0x1,0x9D,0x81,0x97,0x81,0x92,0x1
000092 01b0
000093 81b5
000094 81bf
000095 01ba      	.DB  0xB0,0x1,0xB5,0x81,0xBF,0x81,0xBA,0x1
000096 81ab
000097 01ae
000098 01a4
000099 81a1      	.DB  0xAB,0x81,0xAE,0x1,0xA4,0x1,0xA1,0x81
00009a 01e0
00009b 81e5
00009c 81ef
00009d 01ea      	.DB  0xE0,0x1,0xE5,0x81,0xEF,0x81,0xEA,0x1
00009e 81fb
00009f 01fe
0000a0 01f4
0000a1 81f1      	.DB  0xFB,0x81,0xFE,0x1,0xF4,0x1,0xF1,0x81
0000a2 81d3
0000a3 01d6
0000a4 01dc
0000a5 81d9      	.DB  0xD3,0x81,0xD6,0x1,0xDC,0x1,0xD9,0x81
0000a6 01c8
0000a7 81cd
0000a8 81c7
0000a9 01c2      	.DB  0xC8,0x1,0xCD,0x81,0xC7,0x81,0xC2,0x1
0000aa 0140
0000ab 8145
0000ac 814f
0000ad 014a      	.DB  0x40,0x1,0x45,0x81,0x4F,0x81,0x4A,0x1
0000ae 815b
0000af 015e
0000b0 0154
0000b1 8151      	.DB  0x5B,0x81,0x5E,0x1,0x54,0x1,0x51,0x81
0000b2 8173
0000b3 0176
0000b4 017c
0000b5 8179      	.DB  0x73,0x81,0x76,0x1,0x7C,0x1,0x79,0x81
0000b6 0168
0000b7 816d
0000b8 8167
0000b9 0162      	.DB  0x68,0x1,0x6D,0x81,0x67,0x81,0x62,0x1
0000ba 8123
0000bb 0126
0000bc 012c
0000bd 8129      	.DB  0x23,0x81,0x26,0x1,0x2C,0x1,0x29,0x81
0000be 0138
0000bf 813d
0000c0 8137
0000c1 0132      	.DB  0x38,0x1,0x3D,0x81,0x37,0x81,0x32,0x1
0000c2 0110
0000c3 8115
0000c4 811f
0000c5 011a      	.DB  0x10,0x1,0x15,0x81,0x1F,0x81,0x1A,0x1
0000c6 810b
0000c7 010e
0000c8 0104
0000c9 8101      	.DB  0xB,0x81,0xE,0x1,0x4,0x1,0x1,0x81
0000ca 8303
0000cb 0306
0000cc 030c
0000cd 8309      	.DB  0x3,0x83,0x6,0x3,0xC,0x3,0x9,0x83
0000ce 0318
0000cf 831d
0000d0 8317
0000d1 0312      	.DB  0x18,0x3,0x1D,0x83,0x17,0x83,0x12,0x3
0000d2 0330
0000d3 8335
0000d4 833f
0000d5 033a      	.DB  0x30,0x3,0x35,0x83,0x3F,0x83,0x3A,0x3
0000d6 832b
0000d7 032e
0000d8 0324
0000d9 8321      	.DB  0x2B,0x83,0x2E,0x3,0x24,0x3,0x21,0x83
0000da 0360
0000db 8365
0000dc 836f
0000dd 036a      	.DB  0x60,0x3,0x65,0x83,0x6F,0x83,0x6A,0x3
0000de 837b
0000df 037e
0000e0 0374
0000e1 8371      	.DB  0x7B,0x83,0x7E,0x3,0x74,0x3,0x71,0x83
0000e2 8353
0000e3 0356
0000e4 035c
0000e5 8359      	.DB  0x53,0x83,0x56,0x3,0x5C,0x3,0x59,0x83
0000e6 0348
0000e7 834d
0000e8 8347
0000e9 0342      	.DB  0x48,0x3,0x4D,0x83,0x47,0x83,0x42,0x3
0000ea 03c0
0000eb 83c5
0000ec 83cf
0000ed 03ca      	.DB  0xC0,0x3,0xC5,0x83,0xCF,0x83,0xCA,0x3
0000ee 83db
0000ef 03de
0000f0 03d4
0000f1 83d1      	.DB  0xDB,0x83,0xDE,0x3,0xD4,0x3,0xD1,0x83
0000f2 83f3
0000f3 03f6
0000f4 03fc
0000f5 83f9      	.DB  0xF3,0x83,0xF6,0x3,0xFC,0x3,0xF9,0x83
0000f6 03e8
0000f7 83ed
0000f8 83e7
0000f9 03e2      	.DB  0xE8,0x3,0xED,0x83,0xE7,0x83,0xE2,0x3
0000fa 83a3
0000fb 03a6
0000fc 03ac
0000fd 83a9      	.DB  0xA3,0x83,0xA6,0x3,0xAC,0x3,0xA9,0x83
0000fe 03b8
0000ff 83bd
000100 83b7
000101 03b2      	.DB  0xB8,0x3,0xBD,0x83,0xB7,0x83,0xB2,0x3
000102 0390
000103 8395
000104 839f
000105 039a      	.DB  0x90,0x3,0x95,0x83,0x9F,0x83,0x9A,0x3
000106 838b
000107 038e
000108 0384
000109 8381      	.DB  0x8B,0x83,0x8E,0x3,0x84,0x3,0x81,0x83
00010a 0280
00010b 8285
00010c 828f
00010d 028a      	.DB  0x80,0x2,0x85,0x82,0x8F,0x82,0x8A,0x2
00010e 829b
00010f 029e
000110 0294
000111 8291      	.DB  0x9B,0x82,0x9E,0x2,0x94,0x2,0x91,0x82
000112 82b3
000113 02b6
000114 02bc
000115 82b9      	.DB  0xB3,0x82,0xB6,0x2,0xBC,0x2,0xB9,0x82
000116 02a8
000117 82ad
000118 82a7
000119 02a2      	.DB  0xA8,0x2,0xAD,0x82,0xA7,0x82,0xA2,0x2
00011a 82e3
00011b 02e6
00011c 02ec
00011d 82e9      	.DB  0xE3,0x82,0xE6,0x2,0xEC,0x2,0xE9,0x82
00011e 02f8
00011f 82fd
000120 82f7
000121 02f2      	.DB  0xF8,0x2,0xFD,0x82,0xF7,0x82,0xF2,0x2
000122 02d0
000123 82d5
000124 82df
000125 02da      	.DB  0xD0,0x2,0xD5,0x82,0xDF,0x82,0xDA,0x2
000126 82cb
000127 02ce
000128 02c4
000129 82c1      	.DB  0xCB,0x82,0xCE,0x2,0xC4,0x2,0xC1,0x82
00012a 8243
00012b 0246
00012c 024c
00012d 8249      	.DB  0x43,0x82,0x46,0x2,0x4C,0x2,0x49,0x82
00012e 0258
00012f 825d
000130 8257
000131 0252      	.DB  0x58,0x2,0x5D,0x82,0x57,0x82,0x52,0x2
000132 0270
000133 8275
000134 827f
000135 027a      	.DB  0x70,0x2,0x75,0x82,0x7F,0x82,0x7A,0x2
000136 826b
000137 026e
000138 0264
000139 8261      	.DB  0x6B,0x82,0x6E,0x2,0x64,0x2,0x61,0x82
00013a 0220
00013b 8225
00013c 822f
00013d 022a      	.DB  0x20,0x2,0x25,0x82,0x2F,0x82,0x2A,0x2
00013e 823b
00013f 023e
000140 0234
000141 8231      	.DB  0x3B,0x82,0x3E,0x2,0x34,0x2,0x31,0x82
000142 8213
000143 0216
000144 021c
000145 8219      	.DB  0x13,0x82,0x16,0x2,0x1C,0x2,0x19,0x82
000146 0208
000147 820d
000148 8207
000149 0202      	.DB  0x8,0x2,0xD,0x82,0x7,0x82,0x2,0x2
                 _tbl10_G101:
00014a 2710
00014b 03e8
00014c 0064
00014d 000a      	.DB  0x10,0x27,0xE8,0x3,0x64,0x0,0xA,0x0
00014e 0001      	.DB  0x1,0x0
                 _tbl16_G101:
00014f 1000
000150 0100
000151 0010
000152 0001      	.DB  0x0,0x10,0x0,0x1,0x10,0x0,0x1,0x0
                 
                 __RESET:
000153 94f8      	CLI
000154 27ee      	CLR  R30
000155 bbec      	OUT  EECR,R30
                 
                 ;INTERRUPT VECTORS ARE PLACED
                 ;AT THE START OF FLASH
000156 e0f1      	LDI  R31,1
000157 bffb      	OUT  GICR,R31
000158 bfeb      	OUT  GICR,R30
000159 bfe5      	OUT  MCUCR,R30
                 
                 ;DISABLE WATCHDOG
00015a e1f8      	LDI  R31,0x18
00015b bdf1      	OUT  WDTCR,R31
00015c bde1      	OUT  WDTCR,R30
                 
                 ;CLEAR R2-R14
00015d e08d      	LDI  R24,(14-2)+1
00015e e0a2      	LDI  R26,2
00015f 27bb      	CLR  R27
                 __CLEAR_REG:
000160 93ed      	ST   X+,R30
000161 958a      	DEC  R24
000162 f7e9      	BRNE __CLEAR_REG
                 
                 ;CLEAR SRAM
000163 e080      	LDI  R24,LOW(0x800)
000164 e098      	LDI  R25,HIGH(0x800)
000165 e6a0      	LDI  R26,0x60
                 __CLEAR_SRAM:
000166 93ed      	ST   X+,R30
000167 9701      	SBIW R24,1
000168 f7e9      	BRNE __CLEAR_SRAM
                 
                 ;STACK POINTER INITIALIZATION
000169 e5ef      	LDI  R30,LOW(0x85F)
00016a bfed      	OUT  SPL,R30
00016b e0e8      	LDI  R30,HIGH(0x85F)
00016c bfee      	OUT  SPH,R30
                 
                 ;DATA STACK POINTER INITIALIZATION
00016d e6c0      	LDI  R28,LOW(0x260)
00016e e0d2      	LDI  R29,HIGH(0x260)
                 
00016f 940c 03ba 	JMP  _main
                 
                 	.ESEG
                 	.ORG 0
                 
                 	.DSEG
                 	.ORG 0x260
                 
                 	.CSEG
                 ;/*****************************************************
                 ;This program was produced by the
                 ;CodeWizardAVR V2.03.4 Standard
                 ;Automatic Program Generator
                 ;© Copyright 1998-2008 Pavel Haiduc, HP InfoTech s.r.l.
                 ;http://www.hpinfotech.com
                 ;
                 ;Project : PLM_Modem
                 ;Version : 1.0.0.0
                 ;Date    : 3/21/2010
                 ;Author  : Nguyen Ngoc Son
                 ;Company :
                 ;Comments:
                 ;
                 ;
                 ;Chip type           : ATmega32
                 ;Program type        : Application
                 ;Clock frequency     : 11.059200 MHz
                 ;Memory model        : Small
                 ;External RAM size   : 0
                 ;Data Stack size     : 512
                 ;*****************************************************/
                 ;
                 ;#include <mega32.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#define __SLEEP_DEFINED__
                 	.EQU __se_bit=0x80
                 	.EQU __sm_mask=0x70
                 	.EQU __sm_powerdown=0x20
                 	.EQU __sm_powersave=0x30
                 	.EQU __sm_standby=0x60
                 	.EQU __sm_ext_standby=0x70
                 	.EQU __sm_adc_noise_red=0x10
                 	.SET power_ctrl_reg=mcucr
                 	#endif
                 ;#include <plm.h>
                 ;#include <command.h>
                 ;#include <rs232.h>
                 ;#include <string.h>
                 ;#include <delay.h>
                 ;
                 ;extern void IO_Init(void);
                 ;extern void TimerCounter_Init(void);
                 ;extern void ExtInterupt_Init(void);
                 ;extern void SPI_Init(void);
                 ;extern void RS232_Init(void);
                 ;extern void putchar(char c);
                 ;extern char getchar(void);
                 ;extern unsigned char RS232_IsRunning(void);
                 ;extern void ByteReverse(unsigned long* pul);
                 ;
                 ;volatile unsigned char ucPacket[270];
                 ;volatile unsigned char ucIndex;
                 ;volatile unsigned char ucLength;
                 ;volatile unsigned char ucRS232Started;
                 ;volatile unsigned char ucCommand;
                 ;volatile unsigned char ucPostableBits;
                 ;
                 ;/*------------PLM----------------*/
                 ;
                 ;volatile bit bAck;
                 ;volatile unsigned char ucState;
                 ;volatile unsigned char ucByteCounter;
                 ;volatile unsigned char ucBitCounter;
                 ;volatile unsigned char ucCorrectionCounter;
                 ;volatile unsigned int  uiLastFCS;
                 ;//bang tra cuu FEC
                 ;flash unsigned char ucCRC[] =    {
                 ;                                    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
                 ;                                    0x00, 0x01, 0x00, 0x02, 0x00, 0x18, 0x00, 0x40,
                 ;                                    0x00, 0xc0, 0x03, 0x00, 0x00, 0x70, 0x04, 0x28,
                 ;                                    0x00, 0x01, 0x30, 0x1c, 0x00, 0x06, 0x80, 0x80,
                 ;                                    0x00, 0x10, 0x80, 0x80, 0x07, 0xa0, 0x00, 0x0a,
                 ;                                    0x00, 0x01, 0xe0, 0x02, 0x08, 0xc0, 0x50, 0x05,
                 ;                                    0x00, 0x0e, 0x03, 0x40, 0x60, 0x00, 0x38, 0x14,
                 ;                                    0x00, 0x01, 0x0c, 0x20, 0x00, 0x00, 0x00, 0x00
                 ;                                    };
                 ;//bang tra cuu CRC
                 ;flash unsigned int tableCRC[] =    {
                 ;                                        0x0000, 0x8005, 0x800f, 0x000a, 0x801b, 0x001e, 0x0014, 0x8011,
                 ;                                        0x8033, 0x0036, 0x003c, 0x8039, 0x0028, 0x802d, 0x8027, 0x0022,
                 ;                                        0x8063, 0x0066, 0x006c, 0x8069, 0x0078, 0x807d, 0x8077, 0x0072,
                 ;                                        0x0050, 0x8055, 0x805f, 0x005a, 0x804b, 0x004e, 0x0044, 0x8041,
                 ;                                        0x80c3, 0x00c6, 0x00cc, 0x80c9, 0x00d8, 0x80dd, 0x80d7, 0x00d2,
                 ;                                        0x00f0, 0x80f5, 0x80ff, 0x00fa, 0x80eb, 0x00ee, 0x00e4, 0x80e1,
                 ;                                        0x00a0, 0x80a5, 0x80af, 0x00aa, 0x80bb, 0x00be, 0x00b4, 0x80b1,
                 ;                                        0x8093, 0x0096, 0x009c, 0x8099, 0x0088, 0x808d, 0x8087, 0x0082,
                 ;                                        0x8183, 0x0186, 0x018c, 0x8189, 0x0198, 0x819d, 0x8197, 0x0192,
                 ;                                        0x01b0, 0x81b5, 0x81bf, 0x01ba, 0x81ab, 0x01ae, 0x01a4, 0x81a1,
                 ;                                        0x01e0, 0x81e5, 0x81ef, 0x01ea, 0x81fb, 0x01fe, 0x01f4, 0x81f1,
                 ;                                        0x81d3, 0x01d6, 0x01dc, 0x81d9, 0x01c8, 0x81cd, 0x81c7, 0x01c2,
                 ;                                        0x0140, 0x8145, 0x814f, 0x014a, 0x815b, 0x015e, 0x0154, 0x8151,
                 ;                                        0x8173, 0x0176, 0x017c, 0x8179, 0x0168, 0x816d, 0x8167, 0x0162,
                 ;                                        0x8123, 0x0126, 0x012c, 0x8129, 0x0138, 0x813d, 0x8137, 0x0132,
                 ;                                        0x0110, 0x8115, 0x811f, 0x011a, 0x810b, 0x010e, 0x0104, 0x8101,
                 ;                                        0x8303, 0x0306, 0x030c, 0x8309, 0x0318, 0x831d, 0x8317, 0x0312,
                 ;                                        0x0330, 0x8335, 0x833f, 0x033a, 0x832b, 0x032e, 0x0324, 0x8321,
                 ;                                        0x0360, 0x8365, 0x836f, 0x036a, 0x837b, 0x037e, 0x0374, 0x8371,
                 ;                                        0x8353, 0x0356, 0x035c, 0x8359, 0x0348, 0x834d, 0x8347, 0x0342,
                 ;                                        0x03c0, 0x83c5, 0x83cf, 0x03ca, 0x83db, 0x03de, 0x03d4, 0x83d1,
                 ;                                        0x83f3, 0x03f6, 0x03fc, 0x83f9, 0x03e8, 0x83ed, 0x83e7, 0x03e2,
                 ;                                        0x83a3, 0x03a6, 0x03ac, 0x83a9, 0x03b8, 0x83bd, 0x83b7, 0x03b2,
                 ;                                        0x0390, 0x8395, 0x839f, 0x039a, 0x838b, 0x038e, 0x0384, 0x8381,
                 ;                                        0x0280, 0x8285, 0x828f, 0x028a, 0x829b, 0x029e, 0x0294, 0x8291,
                 ;                                        0x82b3, 0x02b6, 0x02bc, 0x82b9, 0x02a8, 0x82ad, 0x82a7, 0x02a2,
                 ;                                        0x82e3, 0x02e6, 0x02ec, 0x82e9, 0x02f8, 0x82fd, 0x82f7, 0x02f2,
                 ;                                        0x02d0, 0x82d5, 0x82df, 0x02da, 0x82cb, 0x02ce, 0x02c4, 0x82c1,
                 ;                                        0x8243, 0x0246, 0x024c, 0x8249, 0x0258, 0x825d, 0x8257, 0x0252,
                 ;                                        0x0270, 0x8275, 0x827f, 0x027a, 0x826b, 0x026e, 0x0264, 0x8261,
                 ;                                        0x0220, 0x8225, 0x822f, 0x022a, 0x823b, 0x023e, 0x0234, 0x8231,
                 ;                                        0x8213, 0x0216, 0x021c, 0x8219, 0x0208, 0x820d, 0x8207, 0x0202
                 ;                                        };
                 ;
                 ;//cong viec plm thuc hien
                 ;void PLM_Task(void){
                 ; 0000 0068 void PLM_Task(void){
                 
                 	.CSEG
                 _PLM_Task:
                 ; 0000 0069     static bit bLastCLRT;
                 ; 0000 006A     static unsigned char ucByte,
                 ; 0000 006B                          ucFec;
                 ; 0000 006C 
                 ; 0000 006D     if(PLM_pinCLRT){                                                // PLM clock is 1
000171 9bb7      	SBIS 0x16,7
000172 c0b8      	RJMP _0x3
                 ; 0000 006E         if(!bLastCLRT){                                                // transition 0 -> 1
000173 fc21      	SBRC R2,1
000174 c0b5      	RJMP _0x4
                 ; 0000 006F             bLastCLRT = 1;                                            // update last CLRT value
000175 9468      	SET
000176 940e 04ff 	CALL SUBOPT_0x0
                 ; 0000 0070 
                 ; 0000 0071             switch(ucState){
                 ; 0000 0072                 case PLM_STOP:
000178 f409      	BRNE _0x8
                 ; 0000 0073                     break;
000179 c0b0      	RJMP _0x7
                 ; 0000 0074 
                 ; 0000 0075                 case PLM_RX_REG:
                 _0x8:
00017a 30e2      	CPI  R30,LOW(0x2)
00017b e0a0      	LDI  R26,HIGH(0x2)
00017c 07fa      	CPC  R31,R26
00017d f479      	BRNE _0x9
                 ; 0000 0076                     ucByte = (ucByte << 1) | PLM_pinRxD;            // receive 1 bit and store it
00017e 940e 0505 	CALL SUBOPT_0x1
                 ; 0000 0077                     ucBitCounter--;
000180 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 0078 
                 ; 0000 0079                     if(!ucBitCounter){
000182 f449      	BRNE _0xA
                 ; 0000 007A                         ucPacket[ucIndex++] = ucByte;
000183 940e 051a 	CALL SUBOPT_0x3
                 ; 0000 007B                         ucBitCounter = 8;
000185 940e 0527 	CALL SUBOPT_0x4
                 ; 0000 007C                         ucByteCounter--;
                 ; 0000 007D 
                 ; 0000 007E                         if(!ucByteCounter){
000187 91e0 0374 	LDS  R30,_ucByteCounter
000189 30e0      	CPI  R30,0
00018a f409      	BRNE _0xB
                 ; 0000 007F                             ucState = PLM_STOP;                        // stop PLM
00018b c0b5      	RJMP _0x2060001
                 ; 0000 0080 
                 ; 0000 0081                             PLM_pinRXTX = 1;                        // Rx session
                 ; 0000 0082                             PLM_pinREG_DATA = 0;                    // mains access
                 ; 0000 0083 
                 ; 0000 0084                             return;
                 ; 0000 0085                         }
                 ; 0000 0086                     }
                 _0xB:
                 ; 0000 0087 
                 ; 0000 0088                     break;
                 _0xA:
00018c c09d      	RJMP _0x7
                 ; 0000 0089 
                 ; 0000 008A                 case PLM_RX_PREAMBLE:
                 _0x9:
00018d 30e9      	CPI  R30,LOW(0x9)
00018e e0a0      	LDI  R26,HIGH(0x9)
00018f 07fa      	CPC  R31,R26
000190 f421      	BRNE _0x10
                 ; 0000 008B                     ucState++;
000191 91e0 0373 	LDS  R30,_ucState
000193 5fef      	SUBI R30,-LOW(1)
000194 c093      	RJMP _0x9E
                 ; 0000 008C                     break;
                 ; 0000 008D 
                 ; 0000 008E                 case PLM_RX_HEADER_HIGH:
                 _0x10:
000195 30ea      	CPI  R30,LOW(0xA)
000196 e0a0      	LDI  R26,HIGH(0xA)
000197 07fa      	CPC  R31,R26
000198 f489      	BRNE _0x11
                 ; 0000 008F                     ucByte = (ucByte << 1) | PLM_pinRxD;            // receive 1 bit and store it
000199 940e 0505 	CALL SUBOPT_0x1
                 ; 0000 0090 
                 ; 0000 0091                     if(ucByte == HEADER_HIGH_ACK){
00019b 91a0 0377 	LDS  R26,_ucByte_S0000000
00019d 3ea9      	CPI  R26,LOW(0xE9)
00019e f419      	BRNE _0x12
                 ; 0000 0092                         bAck = 1;
00019f 9468      	SET
0001a0 940e 0530 	CALL SUBOPT_0x5
                 ; 0000 0093 
                 ; 0000 0094                         ucBitCounter = 8;
                 ; 0000 0095                         ucState++;
                 ; 0000 0096                     }
                 ; 0000 0097 
                 ; 0000 0098                     if(ucByte == HEADER_HIGH_DATA){
                 _0x12:
0001a2 91a0 0377 	LDS  R26,_ucByte_S0000000
0001a4 39ab      	CPI  R26,LOW(0x9B)
0001a5 f419      	BRNE _0x13
                 ; 0000 0099                         bAck = 0;
0001a6 94e8      	CLT
0001a7 940e 0530 	CALL SUBOPT_0x5
                 ; 0000 009A 
                 ; 0000 009B                         ucBitCounter = 8;
                 ; 0000 009C                         ucState++;
                 ; 0000 009D                     }
                 ; 0000 009E 
                 ; 0000 009F                     break;
                 _0x13:
0001a9 c080      	RJMP _0x7
                 ; 0000 00A0 
                 ; 0000 00A1                 case PLM_RX_HEADER_LOW:
                 _0x11:
0001aa 30eb      	CPI  R30,LOW(0xB)
0001ab e0a0      	LDI  R26,HIGH(0xB)
0001ac 07fa      	CPC  R31,R26
0001ad f4c1      	BRNE _0x14
                 ; 0000 00A2                     ucByte = (ucByte << 1) | PLM_pinRxD;            // receive 1 bit and store it
0001ae 940e 0505 	CALL SUBOPT_0x1
                 ; 0000 00A3                     ucBitCounter--;
0001b0 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 00A4 
                 ; 0000 00A5                     if(!ucBitCounter){
0001b2 f491      	BRNE _0x15
                 ; 0000 00A6                         if(ucByte == HEADER_LOW){
0001b3 91a0 0377 	LDS  R26,_ucByte_S0000000
0001b5 35a8      	CPI  R26,LOW(0x58)
0001b6 f459      	BRNE _0x16
                 ; 0000 00A7                             if(bAck){
0001b7 fe20      	SBRS R2,0
0001b8 c003      	RJMP _0x17
                 ; 0000 00A8                                 ucByteCounter = 2;                    // only FCS
0001b9 e0e2      	LDI  R30,LOW(2)
0001ba 93e0 0374 	STS  _ucByteCounter,R30
                 ; 0000 00A9                             }
                 ; 0000 00AA 
                 ; 0000 00AB                             ucBitCounter = 8;
                 _0x17:
0001bc 940e 053a 	CALL SUBOPT_0x6
                 ; 0000 00AC                             ucFec = 0;
                 ; 0000 00AD                             ucState++;
0001be 91e0 0373 	LDS  R30,_ucState
0001c0 5fef      	SUBI R30,-LOW(1)
0001c1 c001      	RJMP _0x9F
                 ; 0000 00AE                         }
                 ; 0000 00AF                         else{
                 _0x16:
                 ; 0000 00B0                             ucState = PLM_RX_PREAMBLE;
0001c2 e0e9      	LDI  R30,LOW(9)
                 _0x9F:
0001c3 93e0 0373 	STS  _ucState,R30
                 ; 0000 00B1                         }
                 ; 0000 00B2                     }
                 ; 0000 00B3                     break;
                 _0x15:
0001c5 c064      	RJMP _0x7
                 ; 0000 00B4 
                 ; 0000 00B5                 case PLM_RX_DATA:
                 _0x14:
0001c6 30ec      	CPI  R30,LOW(0xC)
0001c7 e0a0      	LDI  R26,HIGH(0xC)
0001c8 07fa      	CPC  R31,R26
0001c9 f4d9      	BRNE _0x19
                 ; 0000 00B6                     ucByte = (ucByte << 1) | PLM_pinRxD;            // receive 1 bit and store it
0001ca 940e 0505 	CALL SUBOPT_0x1
                 ; 0000 00B7                     ucBitCounter--;
0001cc 940e 0541 	CALL SUBOPT_0x7
                 ; 0000 00B8 
                 ; 0000 00B9                     ucFec = (ucFec << 1) | PLM_pinRxD;
0001ce 0fee      	LSL  R30
0001cf 1fff      	ROL  R31
0001d0 01df      	MOVW R26,R30
0001d1 e0e0      	LDI  R30,0
0001d2 99b5      	SBIC 0x16,5
0001d3 e0e1      	LDI  R30,1
0001d4 940e 054a 	CALL SUBOPT_0x8
                 ; 0000 00BA                     if(ucFec & 0x40){
0001d6 940e 054f 	CALL SUBOPT_0x9
0001d8 74e0      	ANDI R30,LOW(0x40)
0001d9 f021      	BREQ _0x1A
                 ; 0000 00BB                         ucFec ^= 0x39;
0001da 940e 054f 	CALL SUBOPT_0x9
0001dc 940e 0553 	CALL SUBOPT_0xA
                 ; 0000 00BC                     }
                 ; 0000 00BD 
                 ; 0000 00BE                     if(!ucBitCounter){
                 _0x1A:
0001de 91e0 0375 	LDS  R30,_ucBitCounter
0001e0 30e0      	CPI  R30,0
0001e1 f411      	BRNE _0x1B
                 ; 0000 00BF                         ucBitCounter = 6;
0001e2 940e 0559 	CALL SUBOPT_0xB
                 ; 0000 00C0                         ucState++;
                 ; 0000 00C1                     }
                 ; 0000 00C2 
                 ; 0000 00C3                     break;
                 _0x1B:
0001e4 c045      	RJMP _0x7
                 ; 0000 00C4 
                 ; 0000 00C5                 case PLM_RX_FEC:
                 _0x19:
0001e5 30ed      	CPI  R30,LOW(0xD)
0001e6 e0a0      	LDI  R26,HIGH(0xD)
0001e7 07fa      	CPC  R31,R26
0001e8 f011      	BREQ PC+3
0001e9 940c 022a 	JMP _0x7
                 ; 0000 00C6                     ucFec = (ucFec << 1) | ~PLM_pinRxD;
0001eb 940e 054f 	CALL SUBOPT_0x9
0001ed 0fee      	LSL  R30
0001ee 1fff      	ROL  R31
0001ef 01df      	MOVW R26,R30
0001f0 e0e0      	LDI  R30,0
0001f1 9bb5      	SBIS 0x16,5
0001f2 e0e1      	LDI  R30,1
0001f3 940e 054a 	CALL SUBOPT_0x8
                 ; 0000 00C7                     ucBitCounter--;
0001f5 940e 0541 	CALL SUBOPT_0x7
                 ; 0000 00C8 
                 ; 0000 00C9                     if(ucFec & 0x40){
0001f7 74e0      	ANDI R30,LOW(0x40)
0001f8 f021      	BREQ _0x1D
                 ; 0000 00CA                         ucFec ^= 0x39;
0001f9 940e 054f 	CALL SUBOPT_0x9
0001fb 940e 0553 	CALL SUBOPT_0xA
                 ; 0000 00CB                     }
                 ; 0000 00CC 
                 ; 0000 00CD                     if(!ucBitCounter){
                 _0x1D:
0001fd 91e0 0375 	LDS  R30,_ucBitCounter
0001ff 30e0      	CPI  R30,0
000200 f549      	BRNE _0x1E
                 ; 0000 00CE                         ucFec &= 0x3f;
000201 940e 054f 	CALL SUBOPT_0x9
000203 73ef      	ANDI R30,LOW(0x3F)
000204 70f0      	ANDI R31,HIGH(0x3F)
000205 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 00CF                         if(ucFec){
000207 30e0      	CPI  R30,0
000208 f089      	BREQ _0x1F
                 ; 0000 00D0                             ucByte ^= ucCRC[ucFec];
000209 91a0 0377 	LDS  R26,_ucByte_S0000000
00020b 27bb      	CLR  R27
00020c 940e 054f 	CALL SUBOPT_0x9
00020e 5aec      	SUBI R30,LOW(-_ucCRC*2)
00020f 4fff      	SBCI R31,HIGH(-_ucCRC*2)
000210 91e4      	LPM  R30,Z
000211 e0f0      	LDI  R31,0
000212 27ea      	EOR  R30,R26
000213 93e0 0377 	STS  _ucByte_S0000000,R30
                 ; 0000 00D1                             ucCorrectionCounter++;
000215 91e0 0376 	LDS  R30,_ucCorrectionCounter
000217 5fef      	SUBI R30,-LOW(1)
000218 93e0 0376 	STS  _ucCorrectionCounter,R30
                 ; 0000 00D2                         }
                 ; 0000 00D3 
                 ; 0000 00D4                         ucPacket[ucIndex++] = ucByte;
                 _0x1F:
00021a 940e 051a 	CALL SUBOPT_0x3
                 ; 0000 00D5                         ucByteCounter--;
00021c 91e0 0374 	LDS  R30,_ucByteCounter
00021e 50e1      	SUBI R30,LOW(1)
00021f 93e0 0374 	STS  _ucByteCounter,R30
                 ; 0000 00D6 
                 ; 0000 00D7                         if(!ucByteCounter){
000221 91e0 0374 	LDS  R30,_ucByteCounter
000223 30e0      	CPI  R30,0
000224 f0e1      	BREQ _0x2060001
                 ; 0000 00D8                             ucState = PLM_STOP;                        // stop PLM
                 ; 0000 00D9 
                 ; 0000 00DA                             PLM_pinRXTX = 1;                        // Rx session
                 ; 0000 00DB                             PLM_pinREG_DATA = 0;                    // mains access
                 ; 0000 00DC 
                 ; 0000 00DD                             return;
                 ; 0000 00DE                         }
                 ; 0000 00DF 
                 ; 0000 00E0                         ucBitCounter = 8;
000225 940e 053a 	CALL SUBOPT_0x6
                 ; 0000 00E1                         ucFec = 0;
                 ; 0000 00E2                         ucState = PLM_RX_DATA;
000227 e0ec      	LDI  R30,LOW(12)
                 _0x9E:
000228 93e0 0373 	STS  _ucState,R30
                 ; 0000 00E3                     }
                 ; 0000 00E4 
                 ; 0000 00E5                     break;
                 _0x1E:
                 ; 0000 00E6             }
                 _0x7:
                 ; 0000 00E7         }
                 ; 0000 00E8     }
                 _0x4:
                 ; 0000 00E9     else{                                                            // PLM clock is 0
00022a c10f      	RJMP _0x25
                 _0x3:
                 ; 0000 00EA         if(bLastCLRT){                                                // transition 1 -> 0
00022b fe21      	SBRS R2,1
00022c c10d      	RJMP _0x26
                 ; 0000 00EB             bLastCLRT = 0;                                            // update last CLRT value
00022d 94e8      	CLT
00022e 940e 04ff 	CALL SUBOPT_0x0
                 ; 0000 00EC 
                 ; 0000 00ED             switch(ucState){
                 ; 0000 00EE                 case PLM_STOP:
000230 f409      	BRNE _0x2A
                 ; 0000 00EF                     break;
000231 c108      	RJMP _0x29
                 ; 0000 00F0 
                 ; 0000 00F1                 case PLM_TX_REG:
                 _0x2A:
000232 30e1      	CPI  R30,LOW(0x1)
000233 e0a0      	LDI  R26,HIGH(0x1)
000234 07fa      	CPC  R31,R26
000235 f509      	BRNE _0x2B
                 ; 0000 00F2                     if(!ucBitCounter){
000236 91e0 0375 	LDS  R30,_ucBitCounter
000238 30e0      	CPI  R30,0
000239 f469      	BRNE _0x2C
                 ; 0000 00F3                         if(ucByteCounter){
00023a 91e0 0374 	LDS  R30,_ucByteCounter
00023c 30e0      	CPI  R30,0
00023d f019      	BREQ _0x2D
                 ; 0000 00F4                             ucByte = ucPacket[ucIndex++];
00023e 940e 0562 	CALL SUBOPT_0xC
                 ; 0000 00F5                             ucBitCounter = 8;
                 ; 0000 00F6                             ucByteCounter--;
                 ; 0000 00F7                         }
                 ; 0000 00F8                         else{
000240 c006      	RJMP _0x2E
                 _0x2D:
                 ; 0000 00F9                             ucState = PLM_STOP;                        // stop PLM
                 _0x2060001:
000241 e0e0      	LDI  R30,LOW(0)
000242 93e0 0373 	STS  _ucState,R30
                 ; 0000 00FA 
                 ; 0000 00FB                             PLM_pinRXTX = 1;                        // Rx session
000244 9aad      	SBI  0x15,5
                 ; 0000 00FC                             PLM_pinREG_DATA = 0;                    // mains access
000245 98ae      	CBI  0x15,6
                 ; 0000 00FD 
                 ; 0000 00FE                             return;
000246 9508      	RET
                 ; 0000 00FF                         }
                 _0x2E:
                 ; 0000 0100                     }
                 ; 0000 0101 
                 ; 0000 0102                     PLM_pinTxD = ucByte & 0x80;                        // transmit 1 bit
                 _0x2C:
000247 940e 056f 	CALL SUBOPT_0xD
000249 78e0      	ANDI R30,LOW(0x80)
00024a 70f0      	ANDI R31,HIGH(0x80)
00024b 30e0      	CPI  R30,0
00024c f411      	BRNE _0x33
00024d 98c6      	CBI  0x18,6
00024e c001      	RJMP _0x34
                 _0x33:
00024f 9ac6      	SBI  0x18,6
                 _0x34:
                 ; 0000 0103                     ucByte <<= 1;
000250 940e 056f 	CALL SUBOPT_0xD
000252 940e 0573 	CALL SUBOPT_0xE
                 ; 0000 0104                     ucBitCounter--;
000254 940e 0578 	CALL SUBOPT_0xF
                 ; 0000 0105 
                 ; 0000 0106                     break;
000256 c0e3      	RJMP _0x29
                 ; 0000 0107 
                 ; 0000 0108                 case PLM_TX_PREAMBLE:
                 _0x2B:
000257 30e3      	CPI  R30,LOW(0x3)
000258 e0a0      	LDI  R26,HIGH(0x3)
000259 07fa      	CPC  R31,R26
00025a f4b1      	BRNE _0x35
                 ; 0000 0109                     PLM_pinTxD = --ucBitCounter & 0x01;
00025b 940e 0578 	CALL SUBOPT_0xF
00025d e0f0      	LDI  R31,0
00025e 70e1      	ANDI R30,LOW(0x1)
00025f f411      	BRNE _0x36
000260 98c6      	CBI  0x18,6
000261 c001      	RJMP _0x37
                 _0x36:
000262 9ac6      	SBI  0x18,6
                 _0x37:
                 ; 0000 010A 
                 ; 0000 010B                     if(!ucBitCounter){
000263 91e0 0375 	LDS  R30,_ucBitCounter
000265 30e0      	CPI  R30,0
000266 f449      	BRNE _0x38
                 ; 0000 010C                         if(bAck){
000267 fe20      	SBRS R2,0
000268 c002      	RJMP _0x39
                 ; 0000 010D                             ucByte = HEADER_HIGH_ACK;
000269 eee9      	LDI  R30,LOW(233)
00026a c001      	RJMP _0xA0
                 ; 0000 010E                         }
                 ; 0000 010F                         else{
                 _0x39:
                 ; 0000 0110                             ucByte = HEADER_HIGH_DATA;
00026b e9eb      	LDI  R30,LOW(155)
                 _0xA0:
00026c 93e0 0377 	STS  _ucByte_S0000000,R30
                 ; 0000 0111                         }
                 ; 0000 0112                         ucBitCounter = 8;
00026e 940e 057e 	CALL SUBOPT_0x10
                 ; 0000 0113                         ucState++;
                 ; 0000 0114                     }
                 ; 0000 0115                     break;
                 _0x38:
000270 c0c9      	RJMP _0x29
                 ; 0000 0116 
                 ; 0000 0117                 case PLM_TX_HEADER_HIGH:
                 _0x35:
000271 30e4      	CPI  R30,LOW(0x4)
000272 e0a0      	LDI  R26,HIGH(0x4)
000273 07fa      	CPC  R31,R26
000274 f4b1      	BRNE _0x3B
                 ; 0000 0118                     PLM_pinTxD = ucByte & 0x80;
000275 940e 056f 	CALL SUBOPT_0xD
000277 78e0      	ANDI R30,LOW(0x80)
000278 70f0      	ANDI R31,HIGH(0x80)
000279 30e0      	CPI  R30,0
00027a f411      	BRNE _0x3C
00027b 98c6      	CBI  0x18,6
00027c c001      	RJMP _0x3D
                 _0x3C:
00027d 9ac6      	SBI  0x18,6
                 _0x3D:
                 ; 0000 0119                     ucByte <<= 1;
00027e 940e 056f 	CALL SUBOPT_0xD
000280 940e 0573 	CALL SUBOPT_0xE
                 ; 0000 011A                     ucBitCounter--;
000282 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 011B 
                 ; 0000 011C                     if(!ucBitCounter){
000284 f429      	BRNE _0x3E
                 ; 0000 011D                         ucByte = HEADER_LOW;
000285 e5e8      	LDI  R30,LOW(88)
000286 93e0 0377 	STS  _ucByte_S0000000,R30
                 ; 0000 011E                         ucBitCounter = 8;
000288 940e 057e 	CALL SUBOPT_0x10
                 ; 0000 011F                         ucState++;
                 ; 0000 0120                     }
                 ; 0000 0121                     break;
                 _0x3E:
00028a c0af      	RJMP _0x29
                 ; 0000 0122 
                 ; 0000 0123                 case PLM_TX_HEADER_LOW:
                 _0x3B:
00028b 30e5      	CPI  R30,LOW(0x5)
00028c e0a0      	LDI  R26,HIGH(0x5)
00028d 07fa      	CPC  R31,R26
00028e f4d9      	BRNE _0x3F
                 ; 0000 0124                     PLM_pinTxD = ucByte & 0x80;
00028f 940e 056f 	CALL SUBOPT_0xD
000291 78e0      	ANDI R30,LOW(0x80)
000292 70f0      	ANDI R31,HIGH(0x80)
000293 30e0      	CPI  R30,0
000294 f411      	BRNE _0x40
000295 98c6      	CBI  0x18,6
000296 c001      	RJMP _0x41
                 _0x40:
000297 9ac6      	SBI  0x18,6
                 _0x41:
                 ; 0000 0125                     ucByte <<= 1;
000298 940e 056f 	CALL SUBOPT_0xD
00029a 940e 0573 	CALL SUBOPT_0xE
                 ; 0000 0126                     ucBitCounter--;
00029c 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 0127 
                 ; 0000 0128                     if(!ucBitCounter){
00029e f451      	BRNE _0x42
                 ; 0000 0129                         ucByte = ucPacket[ucIndex++];
00029f 940e 0562 	CALL SUBOPT_0xC
                 ; 0000 012A                         ucBitCounter = 8;
                 ; 0000 012B                         ucByteCounter--;
                 ; 0000 012C                         ucFec = 0;
0002a1 e0e0      	LDI  R30,LOW(0)
0002a2 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 012D                         ucState++;
0002a4 91e0 0373 	LDS  R30,_ucState
0002a6 5fef      	SUBI R30,-LOW(1)
0002a7 93e0 0373 	STS  _ucState,R30
                 ; 0000 012E                     }
                 ; 0000 012F 
                 ; 0000 0130                     break;
                 _0x42:
0002a9 c090      	RJMP _0x29
                 ; 0000 0131 
                 ; 0000 0132                 case PLM_TX_DATA:
                 _0x3F:
0002aa 30e6      	CPI  R30,LOW(0x6)
0002ab e0a0      	LDI  R26,HIGH(0x6)
0002ac 07fa      	CPC  R31,R26
0002ad f011      	BREQ PC+3
0002ae 940c 02f5 	JMP _0x43
                 ; 0000 0133                     PLM_pinTxD = ucByte & 0x80;
0002b0 940e 056f 	CALL SUBOPT_0xD
0002b2 78e0      	ANDI R30,LOW(0x80)
0002b3 70f0      	ANDI R31,HIGH(0x80)
0002b4 30e0      	CPI  R30,0
0002b5 f411      	BRNE _0x44
0002b6 98c6      	CBI  0x18,6
0002b7 c001      	RJMP _0x45
                 _0x44:
0002b8 9ac6      	SBI  0x18,6
                 _0x45:
                 ; 0000 0134                     ucByte <<= 1;
0002b9 940e 056f 	CALL SUBOPT_0xD
0002bb 940e 0573 	CALL SUBOPT_0xE
                 ; 0000 0135                     ucBitCounter--;
0002bd 940e 0541 	CALL SUBOPT_0x7
                 ; 0000 0136 
                 ; 0000 0137                     ucFec = (ucFec << 1) | PLM_pinTxD;
0002bf 0fee      	LSL  R30
0002c0 1fff      	ROL  R31
0002c1 01df      	MOVW R26,R30
0002c2 e0e0      	LDI  R30,0
0002c3 99c6      	SBIC 0x18,6
0002c4 e0e1      	LDI  R30,1
0002c5 940e 054a 	CALL SUBOPT_0x8
                 ; 0000 0138                     if(ucFec & 0x40){
0002c7 940e 054f 	CALL SUBOPT_0x9
0002c9 74e0      	ANDI R30,LOW(0x40)
0002ca f021      	BREQ _0x46
                 ; 0000 0139                         ucFec ^= 0x39;
0002cb 940e 054f 	CALL SUBOPT_0x9
0002cd 940e 0553 	CALL SUBOPT_0xA
                 ; 0000 013A                     }
                 ; 0000 013B 
                 ; 0000 013C                     if(!ucBitCounter){
                 _0x46:
0002cf 91e0 0375 	LDS  R30,_ucBitCounter
0002d1 30e0      	CPI  R30,0
0002d2 f509      	BRNE _0x47
                 ; 0000 013D                         ucBitCounter = 6;
0002d3 e0e6      	LDI  R30,LOW(6)
0002d4 93e0 0375 	STS  _ucBitCounter,R30
                 ; 0000 013E                         while(ucBitCounter){
                 _0x48:
0002d6 91e0 0375 	LDS  R30,_ucBitCounter
0002d8 30e0      	CPI  R30,0
0002d9 f089      	BREQ _0x4A
                 ; 0000 013F                             ucFec <<= 1;
0002da 940e 054f 	CALL SUBOPT_0x9
0002dc 0fee      	LSL  R30
0002dd 1fff      	ROL  R31
0002de 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 0140                             if(ucFec & 0x40){
0002e0 940e 054f 	CALL SUBOPT_0x9
0002e2 74e0      	ANDI R30,LOW(0x40)
0002e3 f021      	BREQ _0x4B
                 ; 0000 0141                                 ucFec ^= 0x39;
0002e4 940e 054f 	CALL SUBOPT_0x9
0002e6 940e 0553 	CALL SUBOPT_0xA
                 ; 0000 0142                             }
                 ; 0000 0143                             ucBitCounter--;
                 _0x4B:
0002e8 940e 0578 	CALL SUBOPT_0xF
                 ; 0000 0144                         }
0002ea cfeb      	RJMP _0x48
                 _0x4A:
                 ; 0000 0145                         ucFec ^= 0xff;
0002eb 940e 054f 	CALL SUBOPT_0x9
0002ed efaf      	LDI  R26,LOW(255)
0002ee e0b0      	LDI  R27,HIGH(255)
0002ef 27ea      	EOR  R30,R26
0002f0 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 0146 
                 ; 0000 0147                         ucBitCounter = 6;
0002f2 940e 0559 	CALL SUBOPT_0xB
                 ; 0000 0148                         ucState++;
                 ; 0000 0149                     }
                 ; 0000 014A                     break;
                 _0x47:
0002f4 c045      	RJMP _0x29
                 ; 0000 014B 
                 ; 0000 014C                 case PLM_TX_FEC:
                 _0x43:
0002f5 30e7      	CPI  R30,LOW(0x7)
0002f6 e0a0      	LDI  R26,HIGH(0x7)
0002f7 07fa      	CPC  R31,R26
0002f8 f571      	BRNE _0x4C
                 ; 0000 014D                     PLM_pinTxD = ucFec & 0x20;
0002f9 940e 054f 	CALL SUBOPT_0x9
0002fb 72e0      	ANDI R30,LOW(0x20)
0002fc 70f0      	ANDI R31,HIGH(0x20)
0002fd 30e0      	CPI  R30,0
0002fe f411      	BRNE _0x4D
0002ff 98c6      	CBI  0x18,6
000300 c001      	RJMP _0x4E
                 _0x4D:
000301 9ac6      	SBI  0x18,6
                 _0x4E:
                 ; 0000 014E                     ucFec <<= 1;
000302 940e 054f 	CALL SUBOPT_0x9
000304 0fee      	LSL  R30
000305 1fff      	ROL  R31
000306 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 014F                     ucBitCounter--;
000308 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 0150 
                 ; 0000 0151                     if(!ucBitCounter){
00030a f4d9      	BRNE _0x4F
                 ; 0000 0152                         if(!ucByteCounter){
00030b 91e0 0374 	LDS  R30,_ucByteCounter
00030d 30e0      	CPI  R30,0
00030e f479      	BRNE _0x50
                 ; 0000 0153                             ucFec = PLM_pinTxD ^ 0x01;
00030f e0a0      	LDI  R26,0
000310 99c6      	SBIC 0x18,6
000311 e0a1      	LDI  R26,1
000312 e0e1      	LDI  R30,LOW(1)
000313 27ea      	EOR  R30,R26
000314 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 0154                             ucBitCounter = ucPostableBits;
000316 91e0 0372 	LDS  R30,_ucPostableBits
000318 93e0 0375 	STS  _ucBitCounter,R30
                 ; 0000 0155                             ucState++;                                // postamble
00031a 91e0 0373 	LDS  R30,_ucState
00031c 5fef      	SUBI R30,-LOW(1)
00031d c006      	RJMP _0xA1
                 ; 0000 0156                         }
                 ; 0000 0157                         else{
                 _0x50:
                 ; 0000 0158                             ucByte = ucPacket[ucIndex++];
00031e 940e 0562 	CALL SUBOPT_0xC
                 ; 0000 0159                             ucBitCounter = 8;
                 ; 0000 015A                             ucByteCounter--;
                 ; 0000 015B                             ucFec = 0;
000320 e0e0      	LDI  R30,LOW(0)
000321 93e0 0378 	STS  _ucFec_S0000000,R30
                 ; 0000 015C                             ucState = PLM_TX_DATA;
000323 e0e6      	LDI  R30,LOW(6)
                 _0xA1:
000324 93e0 0373 	STS  _ucState,R30
                 ; 0000 015D                         }
                 ; 0000 015E                     }
                 ; 0000 015F                     break;
                 _0x4F:
000326 c013      	RJMP _0x29
                 ; 0000 0160 
                 ; 0000 0161                 case PLM_TX_POSTAMBLE:
                 _0x4C:
000327 30e8      	CPI  R30,LOW(0x8)
000328 e0a0      	LDI  R26,HIGH(0x8)
000329 07fa      	CPC  R31,R26
00032a f479      	BRNE _0x29
                 ; 0000 0162                     PLM_pinTxD = ucFec;
00032b 91e0 0378 	LDS  R30,_ucFec_S0000000
00032d 30e0      	CPI  R30,0
00032e f411      	BRNE _0x53
00032f 98c6      	CBI  0x18,6
000330 c001      	RJMP _0x54
                 _0x53:
000331 9ac6      	SBI  0x18,6
                 _0x54:
                 ; 0000 0163                     ucBitCounter--;
000332 940e 0513 	CALL SUBOPT_0x2
                 ; 0000 0164 
                 ; 0000 0165                     if(!ucBitCounter){
000334 f429      	BRNE _0x55
                 ; 0000 0166                         ucState = PLM_STOP;
000335 e0e0      	LDI  R30,LOW(0)
000336 93e0 0373 	STS  _ucState,R30
                 ; 0000 0167 
                 ; 0000 0168                         PLM_pinRXTX = 1;                            // Rx session
000338 9aad      	SBI  0x15,5
                 ; 0000 0169                         PLM_pinREG_DATA = 0;                        // mains access
000339 98ae      	CBI  0x15,6
                 ; 0000 016A                     }
                 ; 0000 016B                     break;
                 _0x55:
                 ; 0000 016C             }
                 _0x29:
                 ; 0000 016D         }
                 ; 0000 016E     }
                 _0x26:
                 _0x25:
                 ; 0000 016F }
00033a 9508      	RET
                 ;
                 ;//kiem tra xem co dang chay hay khong
                 ;unsigned char PLM_IsRunning(void){
                 ; 0000 0172 unsigned char PLM_IsRunning(void){
                 _PLM_IsRunning:
                 ; 0000 0173     return ucState;
00033b 91e0 0373 	LDS  R30,_ucState
00033d 9508      	RET
                 ; 0000 0174 }
                 ;
                 ;//+++cau hinh cho thanh ghi
                 ;void PLM_SetControlRegister(unsigned long ulControlRegister)
                 ; 0000 0178 {
                 _PLM_SetControlRegister:
                 ; 0000 0179     *(unsigned long*)&ucPacket[0] = ulControlRegister;
                 ;	ulControlRegister -> Y+0
                +
00033e 81e8     +LDD R30 , Y + 0
00033f 81f9     +LDD R31 , Y + 0 + 1
000340 816a     +LDD R22 , Y + 0 + 2
000341 817b     +LDD R23 , Y + 0 + 3
                 	__GETD1S 0
000342 93e0 0260 	STS  _ucPacket,R30
000344 93f0 0261 	STS  _ucPacket+1,R31
000346 9360 0262 	STS  _ucPacket+2,R22
000348 9370 0263 	STS  _ucPacket+3,R23
                 ; 0000 017A 
                 ; 0000 017B     ucIndex = 1;
00034a e0e1      	LDI  R30,LOW(1)
00034b 93e0 036e 	STS  _ucIndex,R30
                 ; 0000 017C     ucBitCounter = 0;
00034d e0e0      	LDI  R30,LOW(0)
00034e 940e 0587 	CALL SUBOPT_0x11
                 ; 0000 017D     ucByteCounter = 3;
                 ; 0000 017E 
                 ; 0000 017F     PLM_pinREG_DATA = 1;
                 ; 0000 0180     PLM_pinRXTX = 0;
000350 98ad      	CBI  0x15,5
                 ; 0000 0181 
                 ; 0000 0182     ucState = PLM_TX_REG;
000351 e0e1      	LDI  R30,LOW(1)
000352 93e0 0373 	STS  _ucState,R30
                 ; 0000 0183 
                 ; 0000 0184     pin_TASK = 0;
000354 9897      	CBI  0x12,7
                 ; 0000 0185 }
000355 9624      	ADIW R28,4
000356 9508      	RET
                 ;
                 ;//+++lay cac thong so thiet lap cau hinh
                 ;unsigned long PLM_GetControlRegister(void){
                 ; 0000 0188 unsigned long PLM_GetControlRegister(void){
                 _PLM_GetControlRegister:
                 ; 0000 0189     ucIndex = 1;
000357 e0e1      	LDI  R30,LOW(1)
000358 93e0 036e 	STS  _ucIndex,R30
                 ; 0000 018A     ucBitCounter = 8;
00035a e0e8      	LDI  R30,LOW(8)
00035b 940e 0587 	CALL SUBOPT_0x11
                 ; 0000 018B     ucByteCounter = 3;
                 ; 0000 018C 
                 ; 0000 018D     PLM_pinREG_DATA = 1;
                 ; 0000 018E     PLM_pinRXTX = 1;
00035d 9aad      	SBI  0x15,5
                 ; 0000 018F 
                 ; 0000 0190     ucState = PLM_RX_REG;
00035e e0e2      	LDI  R30,LOW(2)
00035f 93e0 0373 	STS  _ucState,R30
                 ; 0000 0191     pin_TASK = 0;
000361 9897      	CBI  0x12,7
                 ; 0000 0192 
                 ; 0000 0193     while(PLM_IsRunning() != 0);
                 _0x66:
000362 dfd8      	RCALL _PLM_IsRunning
000363 30e0      	CPI  R30,0
000364 f7e9      	BRNE _0x66
                 ; 0000 0194 
                 ; 0000 0195     // return only 24 bits
                 ; 0000 0196     return (*(unsigned long*)&ucPacket[3]) & 0x00ffffff;
                +
000365 91e0 0263+LDS R30 , _ucPacket + 3
000367 91f0 0264+LDS R31 , _ucPacket + 3 + 1
000369 9160 0265+LDS R22 , _ucPacket + 3 + 2
00036b 9170 0266+LDS R23 , _ucPacket + 3 + 3
                 	__GETD1MN _ucPacket,3
                +
00036d 7fef     +ANDI R30 , LOW ( 0xFFFFFF )
00036e 7fff     +ANDI R31 , HIGH ( 0xFFFFFF )
00036f 7f6f     +ANDI R22 , BYTE3 ( 0xFFFFFF )
000370 7070     +ANDI R23 , BYTE4 ( 0xFFFFFF )
                 	__ANDD1N 0xFFFFFF
000371 9508      	RET
                 ; 0000 0197 }
                 ;
                 ;//+++tinh toan va sua loi
                 ;unsigned int CalcCRC(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 019A unsigned int CalcCRC(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 019B     unsigned int uiCRC = 0;
                 ; 0000 019C 
                 ; 0000 019D     while(ucLength--)
                 ;	*pucBuffer -> Y+3
                 ;	ucLength -> Y+2
                 ;	uiCRC -> R16,R17
                 ; 0000 019E         uiCRC = tableCRC[((uiCRC >> 8) ^ *pucBuffer++) & 0xff] ^ (uiCRC << 8);
                 ; 0000 01A0 return uiCRC;
                 ; 0000 01A1 }
                 ;
                 ;//+++
                 ;unsigned char PLM_GetCorrectionNumber(void){
                 ; 0000 01A4 unsigned char PLM_GetCorrectionNumber(void){
                 ; 0000 01A5     return ucCorrectionCounter;
                 ; 0000 01A6 }
                 ;
                 ;//khoi tao cho plm
                 ;void PLM_Init(void){
                 ; 0000 01A9 void PLM_Init(void){
                 _PLM_Init:
                 ; 0000 01AA     PLM_pinREG_DATA = 0;
000372 98ae      	CBI  0x15,6
                 ; 0000 01AB     PLM_pinRXTX = 1;
000373 9aad      	SBI  0x15,5
                 ; 0000 01AC     ucState = PLM_STOP;
000374 e0e0      	LDI  R30,LOW(0)
000375 93e0 0373 	STS  _ucState,R30
                 ; 0000 01AD }
000377 9508      	RET
                 ;
                 ;//co phan hoi hay khong
                 ;unsigned char PLM_IsAck(void){
                 ; 0000 01B0 unsigned char PLM_IsAck(void){
                 ; 0000 01B1     return bAck;
                 ; 0000 01B2 }
                 ;
                 ;//set cac pin de dua ve che do idle
                 ;void PLM_Stop(void){
                 ; 0000 01B5 void PLM_Stop(void){
                 ; 0000 01B6     ucState = PLM_STOP;
                 ; 0000 01B7 
                 ; 0000 01B8     PLM_pinREG_DATA = 0;
                 ; 0000 01B9     PLM_pinRXTX = 1;
                 ; 0000 01BA }
                 ;
                 ;//chuyen sang che do truyen du lieu
                 ;void PLM_TransmitData(unsigned char ucLength, unsigned char ucAck){
                 ; 0000 01BD void PLM_TransmitData(unsigned char ucLength, unsigned char ucAck){
                 ; 0000 01BE     bAck = ucAck;
                 ;	ucLength -> Y+1
                 ;	ucAck -> Y+0
                 ; 0000 01BF 
                 ; 0000 01C0     ucIndex = 0;
                 ; 0000 01C1     ucBitCounter = 16;                    // 16 bits preamble length
                 ; 0000 01C2     ucByteCounter = ucLength;             // do dai byte
                 ; 0000 01C3 
                 ; 0000 01C4                                    // mains access
                 ; 0000 01C5     PLM_pinREG_DATA = 0;
                 ; 0000 01C6     PLM_pinRXTX = 0;
                 ; 0000 01C7     ucState = PLM_TX_PREAMBLE;
                 ; 0000 01C8 }
                 ;
                 ;//+++chuyen sang che do nhan du lieu
                 ;void PLM_ReceiveData(unsigned char ucLength){
                 ; 0000 01CB void PLM_ReceiveData(unsigned char ucLength){
                 ; 0000 01CC     ucIndex = 0;
                 ;	ucLength -> Y+0
                 ; 0000 01CD     ucByteCounter = ucLength;
                 ; 0000 01CE     ucCorrectionCounter = 0;
                 ; 0000 01CF 
                 ; 0000 01D0     PLM_pinREG_DATA = 0;
                 ; 0000 01D1     PLM_pinRXTX = 1;
                 ; 0000 01D2 
                 ; 0000 01D3     ucState = PLM_RX_PREAMBLE;
                 ; 0000 01D4 }
                 ;//---lay du lieu phuc vu nhan
                 ;void PLM_GetData(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 01D6 void PLM_GetData(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 01D7     memcpy(pucBuffer, &ucPacket[0], ucLength);
                 ;	*pucBuffer -> Y+1
                 ;	ucLength -> Y+0
                 ; 0000 01D8 }
                 ;
                 ;//+++gan du lieu de chuan bi gui qua rs232
                 ;void RS232_SetData(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 01DB void RS232_SetData(unsigned char *pucBuffer, unsigned char ucLength){
                 ; 0000 01DC     int iCounter = 0;
                 ; 0000 01DD     while((ucLength-1)>iCounter){
                 ;	*pucBuffer -> Y+3
                 ;	ucLength -> Y+2
                 ;	iCounter -> R16,R17
                 ; 0000 01DE         putchar(*(pucBuffer+iCounter));
                 ; 0000 01DF         iCounter++;
                 ; 0000 01E0     }
                 ; 0000 01E1 }
                 ;
                 ;//+++lay du lieu tu pc gui xuong qua rs232
                 ;void RS232_GetData(){
                 ; 0000 01E4 void RS232_GetData(){
                 _RS232_GetData:
                 ; 0000 01E5     int iCounter = 0;
                 ; 0000 01E6     for(iCounter = 0;iCounter < ucLength; iCounter++){
000378 931a      	ST   -Y,R17
000379 930a      	ST   -Y,R16
                 ;	iCounter -> R16,R17
                +
00037a e000     +LDI R16 , LOW ( 0 )
00037b e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                +
00037c e000     +LDI R16 , LOW ( 0 )
00037d e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x80:
00037e 91e0 036f 	LDS  R30,_ucLength
000380 01d8      	MOVW R26,R16
000381 e0f0      	LDI  R31,0
000382 17ae      	CP   R26,R30
000383 07bf      	CPC  R27,R31
000384 f46c      	BRGE _0x81
                 ; 0000 01E7         *(ucPacket+iCounter) = getchar();
000385 01f8      	MOVW R30,R16
000386 5ae0      	SUBI R30,LOW(-_ucPacket)
000387 4ffd      	SBCI R31,HIGH(-_ucPacket)
000388 93ff      	PUSH R31
000389 93ef      	PUSH R30
00038a 940e 0495 	CALL _getchar
00038c 91af      	POP  R26
00038d 91bf      	POP  R27
00038e 93ec      	ST   X,R30
                 ; 0000 01E8     }
                +
00038f 5f0f     +SUBI R16 , LOW ( - 1 )
000390 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000391 cfec      	RJMP _0x80
                 _0x81:
                 ; 0000 01E9     ucRS232Started = 0;
000392 e0e0      	LDI  R30,LOW(0)
000393 93e0 0370 	STS  _ucRS232Started,R30
                 ; 0000 01EA }
000395 9109      	LD   R16,Y+
000396 9119      	LD   R17,Y+
000397 9508      	RET
                 ;
                 ;/*-----------RS233---------------*/
                 ;
                 ;// External Interrupt 0 service routine
                 ;
                 ;interrupt [EXT_INT1] void ext_int1_isr(void)
                 ; 0000 01F1 {
                 _ext_int1_isr:
000398 920a      	ST   -Y,R0
000399 921a      	ST   -Y,R1
00039a 92fa      	ST   -Y,R15
00039b 936a      	ST   -Y,R22
00039c 937a      	ST   -Y,R23
00039d 938a      	ST   -Y,R24
00039e 939a      	ST   -Y,R25
00039f 93aa      	ST   -Y,R26
0003a0 93ba      	ST   -Y,R27
0003a1 93ea      	ST   -Y,R30
0003a2 93fa      	ST   -Y,R31
0003a3 b7ef      	IN   R30,SREG
0003a4 93ea      	ST   -Y,R30
                 ; 0000 01F2     if(PLM_IsRunning()>0){
0003a5 df95      	RCALL _PLM_IsRunning
0003a6 30e1      	CPI  R30,LOW(0x1)
0003a7 f010      	BRLO _0x82
                 ; 0000 01F3         //ucState = 0;
                 ; 0000 01F4         PLM_Task();
0003a8 ddc8      	RCALL _PLM_Task
                 ; 0000 01F5     }else{
0003a9 c001      	RJMP _0x83
                 _0x82:
                 ; 0000 01F6         pin_TASK = 1;
0003aa 9a97      	SBI  0x12,7
                 ; 0000 01F7     }
                 _0x83:
                 ; 0000 01F8 }
0003ab 91e9      	LD   R30,Y+
0003ac bfef      	OUT  SREG,R30
0003ad 91f9      	LD   R31,Y+
0003ae 91e9      	LD   R30,Y+
0003af 91b9      	LD   R27,Y+
0003b0 91a9      	LD   R26,Y+
0003b1 9199      	LD   R25,Y+
0003b2 9189      	LD   R24,Y+
0003b3 9179      	LD   R23,Y+
0003b4 9169      	LD   R22,Y+
0003b5 90f9      	LD   R15,Y+
0003b6 9019      	LD   R1,Y+
0003b7 9009      	LD   R0,Y+
0003b8 9518      	RETI
                 ;
                 ;// Trien khai spi
                 ;interrupt [SPI_STC] void spi_isr(void)
                 ; 0000 01FC {
                 _spi_isr:
                 ; 0000 01FD 
                 ; 0000 01FE }
0003b9 9518      	RETI
                 ;
                 ;// Declare your global variables here
                 ;
                 ;
                 ;
                 ;// dao vi tri byte
                 ;
                 ;
                 ;void main(void)
                 ; 0000 0208 {
                 _main:
                 ; 0000 0209     int i;
                 ; 0000 020A     pin_TASK = 1;
                 ;	i -> R16,R17
0003ba 9a97      	SBI  0x12,7
                 ; 0000 020B     // Khai bao bien
                 ; 0000 020C 
                 ; 0000 020D     // Khoi tao cac gia tri
                 ; 0000 020E     IO_Init();
0003bb d06d      	RCALL _IO_Init
                 ; 0000 020F     TimerCounter_Init();
0003bc d07d      	RCALL _TimerCounter_Init
                 ; 0000 0210     RS232_Init();
0003bd d0a0      	RCALL _RS232_Init
                 ; 0000 0211     ExtInterupt_Init();
0003be d08e      	RCALL _ExtInterupt_Init
                 ; 0000 0212 
                 ; 0000 0213     PLM_Init();
0003bf dfb2      	RCALL _PLM_Init
                 ; 0000 0214     // ket thuc khoi tao
                 ; 0000 0215 
                 ; 0000 0216     // khoi tao cho thanh ghi ST
                 ; 0000 0217     PLM_SetControlRegister(DEFAULT_CONTROL_REG);// dummy write
0003c0 940e 058e 	CALL SUBOPT_0x12
                 ; 0000 0218     while(PLM_IsRunning() != 0);
                 _0x88:
0003c2 df78      	RCALL _PLM_IsRunning
0003c3 30e0      	CPI  R30,0
0003c4 f7e9      	BRNE _0x88
                 ; 0000 0219     PLM_SetControlRegister(DEFAULT_CONTROL_REG);// dummy write
0003c5 940e 058e 	CALL SUBOPT_0x12
                 ; 0000 021A     // ket thuc khoi tao cho thanh ghi
                 ; 0000 021B 
                 ; 0000 021C     ucRS232Started = 0;
0003c7 e0e0      	LDI  R30,LOW(0)
0003c8 93e0 0370 	STS  _ucRS232Started,R30
                 ; 0000 021D     // Chuong trinh chinh
                 ; 0000 021E     while (1)
                 _0x8B:
                 ; 0000 021F     {
                 ; 0000 0220         if((RS232_IsRunning()>0)&&(ucRS232Started==0)){
0003ca 940e 04db 	CALL _RS232_IsRunning
0003cc 30e1      	CPI  R30,LOW(0x1)
0003cd f020      	BRLO _0x8F
0003ce 91a0 0370 	LDS  R26,_ucRS232Started
0003d0 30a0      	CPI  R26,LOW(0x0)
0003d1 f009      	BREQ _0x90
                 _0x8F:
0003d2 c01c      	RJMP _0x8E
                 _0x90:
                 ; 0000 0221             if(getchar()== RX_START)
0003d3 940e 0495 	CALL _getchar
0003d5 3aea      	CPI  R30,LOW(0xAA)
0003d6 f4c1      	BRNE _0x91
                 ; 0000 0222             {
                 ; 0000 0223                 delay_ms(200);
0003d7 ece8      	LDI  R30,LOW(200)
0003d8 e0f0      	LDI  R31,HIGH(200)
0003d9 940e 0596 	CALL SUBOPT_0x13
                 ; 0000 0224                 ucRS232Started = 1;
0003db e0e1      	LDI  R30,LOW(1)
0003dc 93e0 0370 	STS  _ucRS232Started,R30
                 ; 0000 0225                 ucCommand = getchar();
0003de 940e 0495 	CALL _getchar
0003e0 93e0 0371 	STS  _ucCommand,R30
                 ; 0000 0226                 ucLength = getchar();
0003e2 940e 0495 	CALL _getchar
0003e4 93e0 036f 	STS  _ucLength,R30
                 ; 0000 0227                 delay_ms(10*ucLength);
0003e6 91e0 036f 	LDS  R30,_ucLength
0003e8 e0f0      	LDI  R31,0
0003e9 e0aa      	LDI  R26,LOW(10)
0003ea e0b0      	LDI  R27,HIGH(10)
0003eb 940e 05b2 	CALL __MULW12
0003ed 940e 0596 	CALL SUBOPT_0x13
                 ; 0000 0228             }
                 ; 0000 0229         }
                 _0x91:
                 ; 0000 022A         if(ucRS232Started == 1){
                 _0x8E:
0003ef 91a0 0370 	LDS  R26,_ucRS232Started
0003f1 30a1      	CPI  R26,LOW(0x1)
0003f2 f5a1      	BRNE _0x92
                 ; 0000 022B             // doc gia tri tu rs232
                 ; 0000 022C             RS232_GetData();
0003f3 df84      	RCALL _RS232_GetData
                 ; 0000 022D             /*
                 ; 0000 022E             for(i=0;i<ucLength;i++){
                 ; 0000 022F                 delay_ms(10);
                 ; 0000 0230                 putchar(ucPacket[i]);
                 ; 0000 0231             }
                 ; 0000 0232             */
                 ; 0000 0233             // kiem tra gia tri dau tien cua ucPacket
                 ; 0000 0234             switch(ucCommand){
0003f4 91e0 0371 	LDS  R30,_ucCommand
0003f6 e0f0      	LDI  R31,0
                 ; 0000 0235                 // doc thanh ghi st7538/7540
                 ; 0000 0236                 case COM_GET_CTR:
0003f7 9730      	SBIW R30,0
0003f8 f571      	BRNE _0x96
                 ; 0000 0237                 {
                 ; 0000 0238                     // get control register (comm)
                 ; 0000 0239 			        *((unsigned long*)&ucPacket[3]) = PLM_GetControlRegister();
0003f9 df5d      	RCALL _PLM_GetControlRegister
                +
0003fa 93e0 0263+STS _ucPacket + 3 , R30
0003fc 93f0 0264+STS _ucPacket + 3 + 1 , R31
0003fe 9360 0265+STS _ucPacket + 3 + 2 , R22
000400 9370 0266+STS _ucPacket + 3 + 3 , R23
                 	__PUTD1MN _ucPacket,3
                 ; 0000 023A 					ByteReverse((unsigned long*)&ucPacket[3]);
                +
000402 e6e3     +LDI R30 , LOW ( _ucPacket + 3 )
000403 e0f2     +LDI R31 , HIGH ( _ucPacket + 3 )
                 	__POINTW1MN _ucPacket,3
000404 93fa      	ST   -Y,R31
000405 93ea      	ST   -Y,R30
000406 940e 04dd 	CALL _ByteReverse
                 ; 0000 023B                     *ucPacket = TX_START;// them header
000408 eaea      	LDI  R30,LOW(170)
000409 93e0 0260 	STS  _ucPacket,R30
                 ; 0000 023C                     *(ucPacket + 1) = ucCommand;// them code
00040b 91e0 0371 	LDS  R30,_ucCommand
                +
00040d 93e0 0261+STS _ucPacket + 1 , R30
                 	__PUTB1MN _ucPacket,1
                 ; 0000 023D                     *(ucPacket + 2) = 3;// them do dai
00040f e0e3      	LDI  R30,LOW(3)
                +
000410 93e0 0262+STS _ucPacket + 2 , R30
                 	__PUTB1MN _ucPacket,2
                 ; 0000 023E 					//RS232_SetData(ucPacket, 7);
                 ; 0000 023F                     for(i=0;i<7;i++){
                +
000412 e000     +LDI R16 , LOW ( 0 )
000413 e010     +LDI R17 , HIGH ( 0 )
                 	__GETWRN 16,17,0
                 _0x98:
                +
000414 3007     +CPI R16 , LOW ( 7 )
000415 e0e0     +LDI R30 , HIGH ( 7 )
000416 071e     +CPC R17 , R30
                 	__CPWRN 16,17,7
000417 f47c      	BRGE _0x99
                 ; 0000 0240                         delay_ms(10);
000418 e0ea      	LDI  R30,LOW(10)
000419 e0f0      	LDI  R31,HIGH(10)
00041a 940e 0596 	CALL SUBOPT_0x13
                 ; 0000 0241                         putchar(ucPacket[i]);
00041c e6a0      	LDI  R26,LOW(_ucPacket)
00041d e0b2      	LDI  R27,HIGH(_ucPacket)
00041e 0fa0      	ADD  R26,R16
00041f 1fb1      	ADC  R27,R17
000420 91ec      	LD   R30,X
000421 93ea      	ST   -Y,R30
000422 940e 04bf 	CALL _putchar
                 ; 0000 0242                     }
                +
000424 5f0f     +SUBI R16 , LOW ( - 1 )
000425 4f1f     +SBCI R17 , HIGH ( - 1 )
                 	__ADDWRN 16,17,1
000426 cfed      	RJMP _0x98
                 _0x99:
                 ; 0000 0243 					break;
                 ; 0000 0244 			    }
                 ; 0000 0245 
                 ; 0000 0246                 // ghi thanh ghi st7538/7540
                 ; 0000 0247 		        case COM_SET_CTR:
                 _0x96:
                 ; 0000 0248                 {
                 ; 0000 0249                     // set control register (comm, byte0, byte1, byte2, byte3)
                 ; 0000 024A //					ByteReverse((unsigned long*)&ucPacket[0]);
                 ; 0000 024B //					PLM_SetControlRegister(*((unsigned long*)&ucPacket[0]));
                 ; 0000 024C 					break;
                 ; 0000 024D 			    }
                 ; 0000 024E                 case COM_SET_PLM:
                 ; 0000 024F                 {
                 ; 0000 0250 //					PLM_Stop();
                 ; 0000 0251 
                 ; 0000 0252 //					uiLastFCS = CalcCRC(&ucPacket[0], 72);
                 ; 0000 0253 //					*(unsigned int*)&ucPacket[72] = uiLastFCS;
                 ; 0000 0254 //
                 ; 0000 0255 //                    ucPostableBits = 8-((78 * 14) % 8);
                 ; 0000 0256 //
                 ; 0000 0257                     // truyen khong co ack
                 ; 0000 0258 //					PLM_TransmitData(74, 0);
                 ; 0000 0259 //                    while(PLM_pinCD_PD == 1);
                 ; 0000 025A //                    pin_TASK = 1;
                 ; 0000 025B //					while(PLM_IsRunning() != 0);
                 ; 0000 025C //                    PLM_ReceiveData(74);
                 ; 0000 025D 					break;
                 ; 0000 025E 			    }
                 ; 0000 025F                 case COM_GET_PLM:
                 ; 0000 0260                 {
                 ; 0000 0261 //                    PLM_ReceiveData(74);
                 ; 0000 0262 					break;
                 ; 0000 0263 			    }
                 ; 0000 0264             }
                 _0x95:
                 ; 0000 0265         }
                 ; 0000 0266 //        while(RS232_IsRunning()!=0);
                 ; 0000 0267 //
                 ; 0000 0268 //        delay_ms(100);
                 ; 0000 0269 
                 ; 0000 026A //		if(PLM_IsRunning() != 0){
                 ; 0000 026B //            if(PLM_pinCD_PD == 0){
                 ; 0000 026C //                pin_TASK = 1;
                 ; 0000 026D //            }
                 ; 0000 026E //        }
                 ; 0000 026F 
                 ; 0000 0270 //        if(PLM_IsRunning()==0){
                 ; 0000 0271 //            if(!PLM_IsAck()){
                 ; 0000 0272 //                if(*(unsigned int*)&ucPacket[72] == CalcCRC(ucPacket, 72)){
                 ; 0000 0273 //                    RS232_SetData(ucPacket, 72);
                 ; 0000 0274 //                }
                 ; 0000 0275 //            }
                 ; 0000 0276 //        }
                 ; 0000 0277     };
                 _0x92:
000427 cfa2      	RJMP _0x8B
                 ; 0000 0278 }
                 _0x9D:
000428 cfff      	RJMP _0x9D
                 ;#include <mega32.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;#include <stdio.h>
                 ;void IO_Init(void)
                 ; 0001 0004 {
                 
                 	.CSEG
                 _IO_Init:
                 ; 0001 0005     // Port A initialization
                 ; 0001 0006     // Func7=Out Func6=Out Func5=In Func4=Out Func3=Out Func2=In Func1=In Func0=In
                 ; 0001 0007     // State7=0 State6=0 State5=T State4=0 State3=0 State2=T State1=T State0=T
                 ; 0001 0008     PORTA=0x00;
000429 e0e0      	LDI  R30,LOW(0)
00042a bbeb      	OUT  0x1B,R30
                 ; 0001 0009     DDRA=0xD8;
00042b ede8      	LDI  R30,LOW(216)
00042c bbea      	OUT  0x1A,R30
                 ; 0001 000A 
                 ; 0001 000B     // Port B initialization
                 ; 0001 000C     // Func7=In Func6=Out Func5=In Func4=Out Func3=In Func2=In Func1=In Func0=In
                 ; 0001 000D     // State7=T State6=0 State5=T State4=0 State3=T State2=T State1=T State0=T
                 ; 0001 000E     PORTB=0x00;
00042d e0e0      	LDI  R30,LOW(0)
00042e bbe8      	OUT  0x18,R30
                 ; 0001 000F     DDRB=0x50;
00042f e5e0      	LDI  R30,LOW(80)
000430 bbe7      	OUT  0x17,R30
                 ; 0001 0010 
                 ; 0001 0011     // Port C initialization
                 ; 0001 0012     // Func7=In Func6=Out Func5=Out Func4=In Func3=Out Func2=In Func1=In Func0=Out
                 ; 0001 0013     // State7=T State6=0 State5=0 State4=T State3=0 State2=T State1=T State0=0
                 ; 0001 0014     PORTC=0x00;
000431 e0e0      	LDI  R30,LOW(0)
000432 bbe5      	OUT  0x15,R30
                 ; 0001 0015     DDRC=0x69;
000433 e6e9      	LDI  R30,LOW(105)
000434 bbe4      	OUT  0x14,R30
                 ; 0001 0016 
                 ; 0001 0017     // Port D initialization
                 ; 0001 0018     // Func7=Out Func6=In Func5=In Func4=In Func3=In Func2=In Func1=Out Func0=In
                 ; 0001 0019     // State7=1 State6=T State5=T State4=T State3=P State2=T State1=0 State0=T
                 ; 0001 001A     PORTD=0x88;
000435 e8e8      	LDI  R30,LOW(136)
000436 bbe2      	OUT  0x12,R30
                 ; 0001 001B     DDRD=0x82;
000437 e8e2      	LDI  R30,LOW(130)
000438 bbe1      	OUT  0x11,R30
                 ; 0001 001C }
000439 9508      	RET
                 ;
                 ;void TimerCounter_Init(void){
                 ; 0001 001E void TimerCounter_Init(void){
                 _TimerCounter_Init:
                 ; 0001 001F     // Timer/Counter 0 initialization
                 ; 0001 0020     // Clock source: System Clock
                 ; 0001 0021     // Clock value: Timer 0 Stopped
                 ; 0001 0022     // Mode: Normal top=FFh
                 ; 0001 0023     // OC0 output: Disconnected
                 ; 0001 0024     TCCR0=0x00;
00043a e0e0      	LDI  R30,LOW(0)
00043b bfe3      	OUT  0x33,R30
                 ; 0001 0025     TCNT0=0x00;
00043c bfe2      	OUT  0x32,R30
                 ; 0001 0026     OCR0=0x00;
00043d bfec      	OUT  0x3C,R30
                 ; 0001 0027 
                 ; 0001 0028     // Timer/Counter 1 initialization
                 ; 0001 0029     // Clock source: System Clock
                 ; 0001 002A     // Clock value: Timer 1 Stopped
                 ; 0001 002B     // Mode: Normal top=FFFFh
                 ; 0001 002C     // OC1A output: Discon.
                 ; 0001 002D     // OC1B output: Discon.
                 ; 0001 002E     // Noise Canceler: Off
                 ; 0001 002F     // Input Capture on Falling Edge
                 ; 0001 0030     // Timer 1 Overflow Interrupt: Off
                 ; 0001 0031     // Input Capture Interrupt: Off
                 ; 0001 0032     // Compare A Match Interrupt: Off
                 ; 0001 0033     // Compare B Match Interrupt: Off
                 ; 0001 0034     TCCR1A=0x00;
00043e bdef      	OUT  0x2F,R30
                 ; 0001 0035     TCCR1B=0x00;
00043f bdee      	OUT  0x2E,R30
                 ; 0001 0036     TCNT1H=0x00;
000440 bded      	OUT  0x2D,R30
                 ; 0001 0037     TCNT1L=0x00;
000441 bdec      	OUT  0x2C,R30
                 ; 0001 0038     ICR1H=0x00;
000442 bde7      	OUT  0x27,R30
                 ; 0001 0039     ICR1L=0x00;
000443 bde6      	OUT  0x26,R30
                 ; 0001 003A     OCR1AH=0x00;
000444 bdeb      	OUT  0x2B,R30
                 ; 0001 003B     OCR1AL=0x00;
000445 bdea      	OUT  0x2A,R30
                 ; 0001 003C     OCR1BH=0x00;
000446 bde9      	OUT  0x29,R30
                 ; 0001 003D     OCR1BL=0x00;
000447 bde8      	OUT  0x28,R30
                 ; 0001 003E 
                 ; 0001 003F     // Timer/Counter 2 initialization
                 ; 0001 0040     // Clock source: System Clock
                 ; 0001 0041     // Clock value: Timer 2 Stopped
                 ; 0001 0042     // Mode: Normal top=FFh
                 ; 0001 0043     // OC2 output: Disconnected
                 ; 0001 0044     ASSR=0x00;
000448 bde2      	OUT  0x22,R30
                 ; 0001 0045     TCCR2=0x00;
000449 bde5      	OUT  0x25,R30
                 ; 0001 0046     TCNT2=0x00;
00044a bde4      	OUT  0x24,R30
                 ; 0001 0047     OCR2=0x00;
00044b bde3      	OUT  0x23,R30
                 ; 0001 0048 
                 ; 0001 0049 
                 ; 0001 004A }
00044c 9508      	RET
                 ;
                 ;void ExtInterupt_Init(void){
                 ; 0001 004C void ExtInterupt_Init(void){
                 _ExtInterupt_Init:
                 ; 0001 004D     // External Interrupt(s) initialization
                 ; 0001 004E     // INT0: Off
                 ; 0001 004F     // INT1: On
                 ; 0001 0050     // INT1 Mode: Low level
                 ; 0001 0051     // INT2: Off
                 ; 0001 0052     GICR|=0x80;
00044d b7eb      	IN   R30,0x3B
00044e e0f0      	LDI  R31,0
00044f 68e0      	ORI  R30,0x80
000450 bfeb      	OUT  0x3B,R30
                 ; 0001 0053     MCUCR=0x00;
000451 e0e0      	LDI  R30,LOW(0)
000452 bfe5      	OUT  0x35,R30
                 ; 0001 0054     MCUCSR=0x00;
000453 bfe4      	OUT  0x34,R30
                 ; 0001 0055     GIFR=0x80;
000454 e8e0      	LDI  R30,LOW(128)
000455 bfea      	OUT  0x3A,R30
                 ; 0001 0056 
                 ; 0001 0057     // Timer(s)/Counter(s) Interrupt(s) initialization
                 ; 0001 0058     TIMSK=0x00;
000456 e0e0      	LDI  R30,LOW(0)
000457 bfe9      	OUT  0x39,R30
                 ; 0001 0059 
                 ; 0001 005A     // Analog Comparator initialization
                 ; 0001 005B     // Analog Comparator: Off
                 ; 0001 005C     // Analog Comparator Input Capture by Timer/Counter 1: Off
                 ; 0001 005D     ACSR=0x80;
000458 e8e0      	LDI  R30,LOW(128)
000459 b9e8      	OUT  0x8,R30
                 ; 0001 005E     SFIOR=0x00;
00045a e0e0      	LDI  R30,LOW(0)
00045b bfe0      	OUT  0x30,R30
                 ; 0001 005F     // Global enable interrupts
                 ; 0001 0060     #asm("sei")
00045c 9478      	sei
                 ; 0001 0061 
                 ; 0001 0062 
                 ; 0001 0063 }
00045d 9508      	RET
                 ;
                 ;void SPI_Init(void){
                 ; 0001 0065 void SPI_Init(void){
                 ; 0001 0066     // SPI initialization
                 ; 0001 0067     // SPI Type: Slave
                 ; 0001 0068     // SPI Clock Rate: 2764.800 kHz
                 ; 0001 0069     // SPI Clock Phase: Cycle Half
                 ; 0001 006A     // SPI Clock Polarity: Low
                 ; 0001 006B     // SPI Data Order: MSB First
                 ; 0001 006C     SPCR=0xC0;
                 ; 0001 006D     SPSR=0x00;
                 ; 0001 006E 
                 ; 0001 006F     // Clear the SPI interrupt flag
                 ; 0001 0070     #asm
                 ; 0001 0071     in   r30,spsr
                 ; 0001 0072     in   r30,spdr
                 ; 0001 0073     #endasm
                 ; 0001 0074 
                 ; 0001 0075 
                 ; 0001 0076 }
                 ;
                 ;
                 ;void RS232_Init(void){
                 ; 0001 0079 void RS232_Init(void){
                 _RS232_Init:
                 ; 0001 007A     // USART initialization
                 ; 0001 007B     // Communication Parameters: 8 Data, 1 Stop, No Parity
                 ; 0001 007C     // USART Receiver: On
                 ; 0001 007D     // USART Transmitter: On
                 ; 0001 007E     // USART Mode: Asynchronous
                 ; 0001 007F     // USART Baud Rate: 9600
                 ; 0001 0080     UCSRA=0x00;
00045e e0e0      	LDI  R30,LOW(0)
00045f b9eb      	OUT  0xB,R30
                 ; 0001 0081     UCSRB=0xD8;
000460 ede8      	LDI  R30,LOW(216)
000461 b9ea      	OUT  0xA,R30
                 ; 0001 0082     UCSRC=0x86;
000462 e8e6      	LDI  R30,LOW(134)
000463 bde0      	OUT  0x20,R30
                 ; 0001 0083     UBRRH=0x00;
000464 e0e0      	LDI  R30,LOW(0)
000465 bde0      	OUT  0x20,R30
                 ; 0001 0084     UBRRL=0x47;
000466 e4e7      	LDI  R30,LOW(71)
000467 b9e9      	OUT  0x9,R30
                 ; 0001 0085 }
000468 9508      	RET
                 ;#include <mega32.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;#include <stdio.h>
                 ;
                 ;#define UPE     2
                 ;#define FE      4
                 ;#define UDRE    5
                 ;#define RXB8    1
                 ;#define TXB8    0
                 ;#define OVR     3
                 ;#define RXC     7
                 ;#define TXC     6
                 ;
                 ;#define FRAMING_ERROR (1<<FE)
                 ;#define PARITY_ERROR (1<<UPE)
                 ;#define DATA_OVERRUN (1<<OVR)
                 ;#define DATA_REGISTER_EMPTY (1<<UDRE)
                 ;#define RX_COMPLETE (1<<RXC)
                 ;#define TX_COMPLETE (1<<TXC)
                 ;// USART Receiver buffer
                 ;#define RX_BUFFER_SIZE 255
                 ;char rx_buffer[RX_BUFFER_SIZE];
                 ;
                 ;#if RX_BUFFER_SIZE<256
                 ;unsigned char rx_wr_index,rx_rd_index,rx_counter;
                 ;#else
                 ;unsigned int rx_wr_index,rx_rd_index,rx_counter;
                 ;#endif
                 ;
                 ;// This flag is set on USART Receiver buffer overflow
                 ;bit rx_buffer_overflow;
                 ;
                 ;// USART Receiver interrupt service routine
                 ;interrupt [USART_RXC] void usart_rx_isr(void)
                 ; 0002 0022 {
                 
                 	.CSEG
                 _usart_rx_isr:
000469 93aa      	ST   -Y,R26
00046a 93ba      	ST   -Y,R27
00046b 93ea      	ST   -Y,R30
00046c 93fa      	ST   -Y,R31
00046d b7ef      	IN   R30,SREG
00046e 93ea      	ST   -Y,R30
                 ; 0002 0023 
                 ; 0002 0024     char status,data;
                 ; 0002 0025     status=UCSRA;
00046f 931a      	ST   -Y,R17
000470 930a      	ST   -Y,R16
                 ;	status -> R17
                 ;	data -> R16
000471 b11b      	IN   R17,11
                 ; 0002 0026     data=UDR;
000472 b10c      	IN   R16,12
                 ; 0002 0027     if ((status & (FRAMING_ERROR | PARITY_ERROR | DATA_OVERRUN))==0)
000473 2fa1      	MOV  R26,R17
000474 e0b0      	LDI  R27,0
000475 e1ec      	LDI  R30,LOW(28)
000476 e0f0      	LDI  R31,HIGH(28)
000477 23ea      	AND  R30,R26
000478 23fb      	AND  R31,R27
000479 9730      	SBIW R30,0
00047a f489      	BRNE _0x40003
                 ; 0002 0028     {
                 ; 0002 0029         rx_buffer[rx_wr_index]=data;
00047b 2de5      	MOV  R30,R5
00047c e0f0      	LDI  R31,0
00047d 58e7      	SUBI R30,LOW(-_rx_buffer)
00047e 4ffc      	SBCI R31,HIGH(-_rx_buffer)
00047f 8300      	ST   Z,R16
                 ; 0002 002A 
                 ; 0002 002B         if (++rx_wr_index == RX_BUFFER_SIZE) rx_wr_index=0;
000480 9453      	INC  R5
000481 efef      	LDI  R30,LOW(255)
000482 15e5      	CP   R30,R5
000483 f409      	BRNE _0x40004
000484 2455      	CLR  R5
                 ; 0002 002C         if (++rx_counter == RX_BUFFER_SIZE)
                 _0x40004:
000485 9473      	INC  R7
000486 efef      	LDI  R30,LOW(255)
000487 15e7      	CP   R30,R7
000488 f419      	BRNE _0x40005
                 ; 0002 002D         {
                 ; 0002 002E             rx_counter=0;
000489 2477      	CLR  R7
                 ; 0002 002F             rx_buffer_overflow=1;
00048a 9468      	SET
00048b f822      	BLD  R2,2
                 ; 0002 0030         };
                 _0x40005:
                 ; 0002 0031     };
                 _0x40003:
                 ; 0002 0032 }
00048c 9109      	LD   R16,Y+
00048d 9119      	LD   R17,Y+
00048e 91e9      	LD   R30,Y+
00048f bfef      	OUT  SREG,R30
000490 91f9      	LD   R31,Y+
000491 91e9      	LD   R30,Y+
000492 91b9      	LD   R27,Y+
000493 91a9      	LD   R26,Y+
000494 9518      	RETI
                 ;
                 ;#ifndef _DEBUG_TERMINAL_IO_
                 ;// Get a character from the USART Receiver buffer
                 ;#define _ALTERNATE_GETCHAR_
                 ;#pragma used+
                 ;char getchar(void)
                 ; 0002 0039 {
                 _getchar:
                 ; 0002 003A     char data;
                 ; 0002 003B     while (rx_counter==0);
000495 931a      	ST   -Y,R17
                 ;	data -> R17
                 _0x40006:
000496 2077      	TST  R7
000497 f3f1      	BREQ _0x40006
                 ; 0002 003C     data=rx_buffer[rx_rd_index];
000498 2de4      	MOV  R30,R4
000499 e0f0      	LDI  R31,0
00049a 58e7      	SUBI R30,LOW(-_rx_buffer)
00049b 4ffc      	SBCI R31,HIGH(-_rx_buffer)
00049c 8110      	LD   R17,Z
                 ; 0002 003D     if (++rx_rd_index == RX_BUFFER_SIZE) rx_rd_index=0;
00049d 9443      	INC  R4
00049e efef      	LDI  R30,LOW(255)
00049f 15e4      	CP   R30,R4
0004a0 f409      	BRNE _0x40009
0004a1 2444      	CLR  R4
                 ; 0002 003E     #asm("cli")
                 _0x40009:
0004a2 94f8      	cli
                 ; 0002 003F     --rx_counter;
0004a3 947a      	DEC  R7
                 ; 0002 0040     #asm("sei")
0004a4 9478      	sei
                 ; 0002 0041     return data;
0004a5 2fe1      	MOV  R30,R17
0004a6 9119      	LD   R17,Y+
0004a7 9508      	RET
                 ; 0002 0042 }
                 ;#pragma used-
                 ;#endif
                 ;
                 ;// USART Transmitter buffer
                 ;#define TX_BUFFER_SIZE 255
                 ;char tx_buffer[TX_BUFFER_SIZE];
                 ;
                 ;#if TX_BUFFER_SIZE<256
                 ;unsigned char tx_wr_index,tx_rd_index,tx_counter;
                 ;#else
                 ;static unsigned int tx_wr_index,tx_rd_index,tx_counter;
                 ;#endif
                 ;
                 ;// USART Transmitter interrupt service routine
                 ;interrupt [USART_TXC] void usart_tx_isr(void)
                 ; 0002 0052 {
                 _usart_tx_isr:
0004a8 93ea      	ST   -Y,R30
0004a9 93fa      	ST   -Y,R31
0004aa b7ef      	IN   R30,SREG
0004ab 93ea      	ST   -Y,R30
                 ; 0002 0053     if (tx_counter)
0004ac 2088      	TST  R8
0004ad f061      	BREQ _0x4000A
                 ; 0002 0054     {
                 ; 0002 0055         --tx_counter;
0004ae 948a      	DEC  R8
                 ; 0002 0056         UDR=tx_buffer[tx_rd_index];
0004af 2de9      	MOV  R30,R9
0004b0 e0f0      	LDI  R31,0
0004b1 58e8      	SUBI R30,LOW(-_tx_buffer)
0004b2 4ffb      	SBCI R31,HIGH(-_tx_buffer)
0004b3 81e0      	LD   R30,Z
0004b4 b9ec      	OUT  0xC,R30
                 ; 0002 0057         if (++tx_rd_index == TX_BUFFER_SIZE) tx_rd_index=0;
0004b5 9493      	INC  R9
0004b6 efef      	LDI  R30,LOW(255)
0004b7 15e9      	CP   R30,R9
0004b8 f409      	BRNE _0x4000B
0004b9 2499      	CLR  R9
                 ; 0002 0058     };
                 _0x4000B:
                 _0x4000A:
                 ; 0002 0059 }
0004ba 91e9      	LD   R30,Y+
0004bb bfef      	OUT  SREG,R30
0004bc 91f9      	LD   R31,Y+
0004bd 91e9      	LD   R30,Y+
0004be 9518      	RETI
                 ;
                 ;#ifndef _DEBUG_TERMINAL_IO_
                 ;// Write a character to the USART Transmitter buffer
                 ;#define _ALTERNATE_PUTCHAR_
                 ;#pragma used+
                 ;void putchar(char c)
                 ; 0002 0060 {
                 _putchar:
                 ; 0002 0061     while (tx_counter == TX_BUFFER_SIZE);
                 ;	c -> Y+0
                 _0x4000C:
0004bf efef      	LDI  R30,LOW(255)
0004c0 15e8      	CP   R30,R8
0004c1 f3e9      	BREQ _0x4000C
                 ; 0002 0062     #asm("cli")
0004c2 94f8      	cli
                 ; 0002 0063     if (tx_counter || ((UCSRA & DATA_REGISTER_EMPTY)==0))
0004c3 2088      	TST  R8
0004c4 f421      	BRNE _0x40010
0004c5 b1eb      	IN   R30,0xB
0004c6 e0f0      	LDI  R31,0
0004c7 72e0      	ANDI R30,LOW(0x20)
0004c8 f469      	BRNE _0x4000F
                 _0x40010:
                 ; 0002 0064     {
                 ; 0002 0065         tx_buffer[tx_wr_index]=c;
0004c9 2de6      	MOV  R30,R6
0004ca e0f0      	LDI  R31,0
0004cb 58e8      	SUBI R30,LOW(-_tx_buffer)
0004cc 4ffb      	SBCI R31,HIGH(-_tx_buffer)
0004cd 81a8      	LD   R26,Y
0004ce 83a0      	STD  Z+0,R26
                 ; 0002 0066         if (++tx_wr_index == TX_BUFFER_SIZE) tx_wr_index=0;
0004cf 9463      	INC  R6
0004d0 efef      	LDI  R30,LOW(255)
0004d1 15e6      	CP   R30,R6
0004d2 f409      	BRNE _0x40012
0004d3 2466      	CLR  R6
                 ; 0002 0067         ++tx_counter;
                 _0x40012:
0004d4 9483      	INC  R8
                 ; 0002 0068     }
                 ; 0002 0069     else
0004d5 c002      	RJMP _0x40013
                 _0x4000F:
                 ; 0002 006A         UDR=c;
0004d6 81e8      	LD   R30,Y
0004d7 b9ec      	OUT  0xC,R30
                 ; 0002 006B     #asm("sei")
                 _0x40013:
0004d8 9478      	sei
                 ; 0002 006C }
0004d9 9621      	ADIW R28,1
0004da 9508      	RET
                 ;#pragma used-
                 ;#endif
                 ;
                 ;
                 ;unsigned char RS232_IsRunning(void){
                 ; 0002 0071 unsigned char RS232_IsRunning(void){
                 _RS232_IsRunning:
                 ; 0002 0072     return (unsigned char) rx_counter;
0004db 2de7      	MOV  R30,R7
0004dc 9508      	RET
                 ; 0002 0073 }
                 ;#include <mega32.h>
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 ;void ByteReverse(unsigned long* pul){
                 ; 0003 0002 void ByteReverse(unsigned long* pul){
                 
                 	.CSEG
                 _ByteReverse:
                 ; 0003 0003     unsigned char uc;
                 ; 0003 0004 
                 ; 0003 0005     uc = *((unsigned char*)pul + 0);                                // msb
0004dd 931a      	ST   -Y,R17
                 ;	*pul -> Y+1
                 ;	uc -> R17
0004de 81a9      	LDD  R26,Y+1
0004df 81ba      	LDD  R27,Y+1+1
0004e0 9610      	ADIW R26,0
0004e1 911c      	LD   R17,X
                 ; 0003 0006     *((unsigned char*)pul + 0) = *((unsigned char*)pul + 3);        // lsb
0004e2 81a9      	LDD  R26,Y+1
0004e3 81ba      	LDD  R27,Y+1+1
0004e4 9613      	ADIW R26,3
0004e5 91ec      	LD   R30,X
                +
0004e6 81a9     +LDD R26 , Y + 1
0004e7 81ba     +LDD R27 , Y + 1 + 1
0004e8 9610     +ADIW R26 , 0
0004e9 93ec     +ST X , R30
                 	__PUTB1SNS 1,0
                 ; 0003 0007     *((unsigned char*)pul + 3) = uc;
0004ea 81e9      	LDD  R30,Y+1
0004eb 81fa      	LDD  R31,Y+1+1
                +
0004ec 8313     +STD Z + 3 , R17
                 	__PUTBZR 17,3
                 ; 0003 0008 
                 ; 0003 0009     uc = *((unsigned char*)(pul) + 1);                                // msb
0004ed 81a9      	LDD  R26,Y+1
0004ee 81ba      	LDD  R27,Y+1+1
0004ef 9611      	ADIW R26,1
0004f0 911c      	LD   R17,X
                 ; 0003 000A     *((unsigned char*)pul + 1) = *((unsigned char*)pul + 2);        // lsb
0004f1 81a9      	LDD  R26,Y+1
0004f2 81ba      	LDD  R27,Y+1+1
0004f3 9612      	ADIW R26,2
0004f4 91ec      	LD   R30,X
                +
0004f5 81a9     +LDD R26 , Y + 1
0004f6 81ba     +LDD R27 , Y + 1 + 1
0004f7 9611     +ADIW R26 , 1
0004f8 93ec     +ST X , R30
                 	__PUTB1SNS 1,1
                 ; 0003 000B     *((unsigned char*)pul + 2) = uc;
0004f9 81e9      	LDD  R30,Y+1
0004fa 81fa      	LDD  R31,Y+1+1
                +
0004fb 8312     +STD Z + 2 , R17
                 	__PUTBZR 17,2
                 ; 0003 000C }
0004fc 8118      	LDD  R17,Y+0
0004fd 9623      	ADIW R28,3
0004fe 9508      	RET
                 ;
                 ;unsigned char Sum(unsigned char* pucBuffer, unsigned char ucLength){
                 ; 0003 000E unsigned char Sum(unsigned char* pucBuffer, unsigned char ucLength){
                 ; 0003 000F     unsigned char    uc,
                 ; 0003 0010                     ucSum = 0x00;
                 ; 0003 0011 
                 ; 0003 0012     for(uc = 0; uc < ucLength; uc++){
                 ;	*pucBuffer -> Y+3
                 ;	ucLength -> Y+2
                 ;	uc -> R17
                 ;	ucSum -> R16
                 ; 0003 0013         ucSum += pucBuffer[uc];
                 ; 0003 0014     }
                 ; 0003 0015 
                 ; 0003 0016     return ucSum;
                 ; 0003 0017 }
                 
                 	.CSEG
                 	#ifndef __SLEEP_DEFINED__
                 	#endif
                 
                 	.CSEG
                 
                 	.CSEG
                 
                 	.DSEG
                 _ucPacket:
000260           	.BYTE 0x10E
                 _ucIndex:
00036e           	.BYTE 0x1
                 _ucLength:
00036f           	.BYTE 0x1
                 _ucRS232Started:
000370           	.BYTE 0x1
                 _ucCommand:
000371           	.BYTE 0x1
                 _ucPostableBits:
000372           	.BYTE 0x1
                 _ucState:
000373           	.BYTE 0x1
                 _ucByteCounter:
000374           	.BYTE 0x1
                 _ucBitCounter:
000375           	.BYTE 0x1
                 _ucCorrectionCounter:
000376           	.BYTE 0x1
                 _ucByte_S0000000:
000377           	.BYTE 0x1
                 _ucFec_S0000000:
000378           	.BYTE 0x1
                 _rx_buffer:
000379           	.BYTE 0xFF
                 _tx_buffer:
000478           	.BYTE 0xFF
                 _p_S1000024:
000577           	.BYTE 0x2
                 
                 	.CSEG
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:2 WORDS
                 SUBOPT_0x0:
0004ff f821      	BLD  R2,1
000500 91e0 0373 	LDS  R30,_ucState
000502 e0f0      	LDI  R31,0
000503 9730      	SBIW R30,0
000504 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:42 WORDS
                 SUBOPT_0x1:
000505 91e0 0377 	LDS  R30,_ucByte_S0000000
000507 e0f0      	LDI  R31,0
000508 0fee      	LSL  R30
000509 1fff      	ROL  R31
00050a 01df      	MOVW R26,R30
00050b e0e0      	LDI  R30,0
00050c 99b5      	SBIC 0x16,5
00050d e0e1      	LDI  R30,1
00050e e0f0      	LDI  R31,0
00050f 2bea      	OR   R30,R26
000510 93e0 0377 	STS  _ucByte_S0000000,R30
000512 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 6 TIMES, CODE SIZE REDUCTION:27 WORDS
                 SUBOPT_0x2:
000513 91e0 0375 	LDS  R30,_ucBitCounter
000515 50e1      	SUBI R30,LOW(1)
000516 93e0 0375 	STS  _ucBitCounter,R30
000518 30e0      	CPI  R30,0
000519 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:9 WORDS
                 SUBOPT_0x3:
00051a 91e0 036e 	LDS  R30,_ucIndex
00051c 5fef      	SUBI R30,-LOW(1)
00051d 93e0 036e 	STS  _ucIndex,R30
00051f 50e1      	SUBI R30,LOW(1)
000520 e0f0      	LDI  R31,0
000521 5ae0      	SUBI R30,LOW(-_ucPacket)
000522 4ffd      	SBCI R31,HIGH(-_ucPacket)
000523 91a0 0377 	LDS  R26,_ucByte_S0000000
000525 83a0      	STD  Z+0,R26
000526 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:15 WORDS
                 SUBOPT_0x4:
000527 e0e8      	LDI  R30,LOW(8)
000528 93e0 0375 	STS  _ucBitCounter,R30
00052a 91e0 0374 	LDS  R30,_ucByteCounter
00052c 50e1      	SUBI R30,LOW(1)
00052d 93e0 0374 	STS  _ucByteCounter,R30
00052f 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:4 WORDS
                 SUBOPT_0x5:
000530 f820      	BLD  R2,0
000531 e0e8      	LDI  R30,LOW(8)
000532 93e0 0375 	STS  _ucBitCounter,R30
000534 91e0 0373 	LDS  R30,_ucState
000536 5fef      	SUBI R30,-LOW(1)
000537 93e0 0373 	STS  _ucState,R30
000539 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x6:
00053a e0e8      	LDI  R30,LOW(8)
00053b 93e0 0375 	STS  _ucBitCounter,R30
00053d e0e0      	LDI  R30,LOW(0)
00053e 93e0 0378 	STS  _ucFec_S0000000,R30
000540 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:13 WORDS
                 SUBOPT_0x7:
000541 91e0 0375 	LDS  R30,_ucBitCounter
000543 50e1      	SUBI R30,LOW(1)
000544 93e0 0375 	STS  _ucBitCounter,R30
000546 91e0 0378 	LDS  R30,_ucFec_S0000000
000548 e0f0      	LDI  R31,0
000549 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:5 WORDS
                 SUBOPT_0x8:
00054a e0f0      	LDI  R31,0
00054b 2bea      	OR   R30,R26
00054c 93e0 0378 	STS  _ucFec_S0000000,R30
00054e 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 14 TIMES, CODE SIZE REDUCTION:36 WORDS
                 SUBOPT_0x9:
00054f 91e0 0378 	LDS  R30,_ucFec_S0000000
000551 e0f0      	LDI  R31,0
000552 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:6 WORDS
                 SUBOPT_0xA:
000553 e3a9      	LDI  R26,LOW(57)
000554 e0b0      	LDI  R27,HIGH(57)
000555 27ea      	EOR  R30,R26
000556 93e0 0378 	STS  _ucFec_S0000000,R30
000558 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0xB:
000559 e0e6      	LDI  R30,LOW(6)
00055a 93e0 0375 	STS  _ucBitCounter,R30
00055c 91e0 0373 	LDS  R30,_ucState
00055e 5fef      	SUBI R30,-LOW(1)
00055f 93e0 0373 	STS  _ucState,R30
000561 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:25 WORDS
                 SUBOPT_0xC:
000562 91e0 036e 	LDS  R30,_ucIndex
000564 5fef      	SUBI R30,-LOW(1)
000565 93e0 036e 	STS  _ucIndex,R30
000567 50e1      	SUBI R30,LOW(1)
000568 e0f0      	LDI  R31,0
000569 5ae0      	SUBI R30,LOW(-_ucPacket)
00056a 4ffd      	SBCI R31,HIGH(-_ucPacket)
00056b 81e0      	LD   R30,Z
00056c 93e0 0377 	STS  _ucByte_S0000000,R30
00056e cfb8      	RJMP SUBOPT_0x4
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 8 TIMES, CODE SIZE REDUCTION:18 WORDS
                 SUBOPT_0xD:
00056f 91e0 0377 	LDS  R30,_ucByte_S0000000
000571 e0f0      	LDI  R31,0
000572 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 4 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0xE:
000573 0fee      	LSL  R30
000574 1fff      	ROL  R31
000575 93e0 0377 	STS  _ucByte_S0000000,R30
000577 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0xF:
000578 91e0 0375 	LDS  R30,_ucBitCounter
00057a 50e1      	SUBI R30,LOW(1)
00057b 93e0 0375 	STS  _ucBitCounter,R30
00057d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x10:
00057e e0e8      	LDI  R30,LOW(8)
00057f 93e0 0375 	STS  _ucBitCounter,R30
000581 91e0 0373 	LDS  R30,_ucState
000583 5fef      	SUBI R30,-LOW(1)
000584 93e0 0373 	STS  _ucState,R30
000586 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x11:
000587 93e0 0375 	STS  _ucBitCounter,R30
000589 e0e3      	LDI  R30,LOW(3)
00058a 93e0 0374 	STS  _ucByteCounter,R30
00058c 9aae      	SBI  0x15,6
00058d 9508      	RET
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 2 TIMES, CODE SIZE REDUCTION:3 WORDS
                 SUBOPT_0x12:
                +
00058e e1ec     +LDI R30 , LOW ( 0x321C )
00058f e3f2     +LDI R31 , HIGH ( 0x321C )
000590 e060     +LDI R22 , BYTE3 ( 0x321C )
000591 e070     +LDI R23 , BYTE4 ( 0x321C )
                 	__GETD1N 0x321C
000592 940e 05c5 	CALL __PUTPARD1
000594 940c 033e 	JMP  _PLM_SetControlRegister
                 
                 ;OPTIMIZER ADDED SUBROUTINE, CALLED 3 TIMES, CODE SIZE REDUCTION:1 WORDS
                 SUBOPT_0x13:
000596 93fa      	ST   -Y,R31
000597 93ea      	ST   -Y,R30
000598 940c 059a 	JMP  _delay_ms
                 
                 
                 	.CSEG
                 _delay_ms:
00059a 91e9      	ld   r30,y+
00059b 91f9      	ld   r31,y+
00059c 9630      	adiw r30,0
00059d f039      	breq __delay_ms1
                 __delay_ms0:
                +
00059e ec8d     +LDI R24 , LOW ( 0xACD )
00059f e09a     +LDI R25 , HIGH ( 0xACD )
                +__DELAY_USW_LOOP :
0005a0 9701     +SBIW R24 , 1
0005a1 f7f1     +BRNE __DELAY_USW_LOOP
                 	__DELAY_USW 0xACD
0005a2 95a8      	wdr
0005a3 9731      	sbiw r30,1
0005a4 f7c9      	brne __delay_ms0
                 __delay_ms1:
0005a5 9508      	ret
                 
                 __ANEGW1:
0005a6 95f1      	NEG  R31
0005a7 95e1      	NEG  R30
0005a8 40f0      	SBCI R31,0
0005a9 9508      	RET
                 
                 __MULW12U:
0005aa 9ffa      	MUL  R31,R26
0005ab 2df0      	MOV  R31,R0
0005ac 9feb      	MUL  R30,R27
0005ad 0df0      	ADD  R31,R0
0005ae 9fea      	MUL  R30,R26
0005af 2de0      	MOV  R30,R0
0005b0 0df1      	ADD  R31,R1
0005b1 9508      	RET
                 
                 __MULW12:
0005b2 d004      	RCALL __CHKSIGNW
0005b3 dff6      	RCALL __MULW12U
0005b4 f40e      	BRTC __MULW121
0005b5 dff0      	RCALL __ANEGW1
                 __MULW121:
0005b6 9508      	RET
                 
                 __CHKSIGNW:
0005b7 94e8      	CLT
0005b8 fff7      	SBRS R31,7
0005b9 c002      	RJMP __CHKSW1
0005ba dfeb      	RCALL __ANEGW1
0005bb 9468      	SET
                 __CHKSW1:
0005bc ffb7      	SBRS R27,7
0005bd c006      	RJMP __CHKSW2
0005be 95a0      	COM  R26
0005bf 95b0      	COM  R27
0005c0 9611      	ADIW R26,1
0005c1 f800      	BLD  R0,0
0005c2 9403      	INC  R0
0005c3 fa00      	BST  R0,0
                 __CHKSW2:
0005c4 9508      	RET
                 
                 __PUTPARD1:
0005c5 937a      	ST   -Y,R23
0005c6 936a      	ST   -Y,R22
0005c7 93fa      	ST   -Y,R31
0005c8 93ea      	ST   -Y,R30
0005c9 9508      	RET
                 
                 ;END OF CODE MARKER
                 __END_OF_CODE:


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

ATmega32 register use summary:
r0 :   8 r1 :   3 r2 :   7 r3 :   0 r4 :   4 r5 :   4 r6 :   4 r7 :   6 
r8 :   5 r9 :   4 r10:   0 r11:   0 r12:   0 r13:   0 r14:   0 r15:   2 
r16:  15 r17:  23 r18:   0 r19:   0 r20:   0 r21:   0 r22:   9 r23:   9 
r24:   8 r25:   4 r26:  85 r27:  24 r28:   4 r29:   1 r30: 373 r31:  90 
x  :  10 y  :  85 z  :   9 
Registers used: 25 out of 35 (71.4%)

ATmega32 instruction use summary:
adc   :   1 add   :   3 adiw  :  11 and   :   2 andi  :  22 asr   :   0 
bclr  :   0 bld   :   4 brbc  :   0 brbs  :   0 brcc  :   0 brcs  :   0 
break :   0 breq  :  15 brge  :   2 brhc  :   0 brhs  :   0 brid  :   0 
brie  :   0 brlo  :   2 brlt  :   0 brmi  :   0 brne  :  53 brpl  :   0 
brsh  :   0 brtc  :   1 brts  :   0 brvc  :   0 brvs  :   0 bset  :   0 
bst   :   1 call  :  81 cbi   :  13 cbr   :   0 clc   :   0 clh   :   0 
cli   :   3 cln   :   0 clr   :   8 cls   :   0 clt   :   3 clv   :   0 
clz   :   0 com   :   2 cp    :   7 cpc   :  15 cpi   :  42 cpse  :   0 
dec   :   3 des   :   0 eor   :   4 fmul  :   0 fmuls :   0 fmulsu:   0 
icall :   0 ijmp  :   0 in    :   7 inc   :   7 jmp   :  26 ld    :  37 
ldd   :  21 ldi   : 141 lds   :  48 lpm   :   2 lsl   :   7 lsr   :   0 
mov   :   9 movw  :   6 mul   :   3 muls  :   0 mulsu :   0 neg   :   2 
nop   :   0 or    :   2 ori   :   1 out   :  50 pop   :   2 push  :   2 
rcall :  15 ret   :  38 reti  :   4 rjmp  :  42 rol   :   7 ror   :   0 
sbc   :   0 sbci  :  11 sbi   :  14 sbic  :   4 sbis  :   2 sbiw  :   6 
sbr   :   0 sbrc  :   1 sbrs  :   5 sec   :   0 seh   :   0 sei   :   3 
sen   :   0 ser   :   0 ses   :   0 set   :   4 sev   :   0 sez   :   0 
sleep :   0 spm   :   0 st    :  41 std   :   4 sts   :  64 sub   :   0 
subi  :  27 swap  :   0 tst   :   3 wdr   :   1 
Instructions used: 61 out of 112 (54.5%)

ATmega32 memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x000b94   2370    594   2964   32768   9.0%
[.dseg] 0x000060 0x000579      0    793    793    2048  38.7%
[.eseg] 0x000000 0x000000      0      0      0    1024   0.0%

Assembly complete, 0 errors, 6 warnings
